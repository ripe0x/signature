app = "fold-image-api"
primary_region = "iad"

[build]
  dockerfile = "Dockerfile"

[env]
  NODE_ENV = "production"
  CACHE_ENABLED = "true"
  CHAIN = "sepolia"
  CONTRACT_ADDRESS = "0x13Cc4c32899c1877F43e891F02935eaE2A0419a7"
  # RPC_URL must be set as a secret: fly secrets set RPC_URL="https://..."

[http_service]
  internal_port = 3001
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true
  min_machines_running = 1

[mounts]
  source = "image_cache"
  destination = "/data/cache"

[[vm]]
  memory = "2gb"
  cpu_kind = "shared"
  cpus = 1

<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden}</style><script>window.LESS_TOKEN_ID=12;window.LESS_SEED="0x0f5f3900456f4c0231d1fea4e8548d79ca11742d3cf00aeb963eb86698586f49";window.FOLD_COUNT=0;</script></head><body><script>(()=>{var te="FoldMono",cn="data:font/woff2;charset=utf-8;base64,d09GMgABAAAAAAOIAA4AAAAADAQAAAM2AAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhYbEBwmBmAAPBEQCo9sjiABNgIkAwwLDAAEIAWCfAcgGzkKIK4GbGOy2GicLj5u8RpRKYyZuIy26Oe9GkG0llXPQhAUoVLRQOiIjYYnUuLluRfqlUh8nv35d3DbeacPRpI7wLzuWl2XGTr+R4rdqk48ecPEg8A0wvynUz9VJ0gGYLd1C/5xl7xv3SZnBWzBGr8QtP8P9KU3gF/4v///XtV/LeBjv+MBmzYJYqG96Ce0h6/5XmbHBNnLAlygYMFqXKAK1bYRcgkLxgZhXaf627YE6gFJIBcCteo1AuwbDBChbA4tEHHa8CDi2utCBABSXokNorp4phkhurc/Cdkmqp0bWqrKalIqUp4jaAbAzD4U5MOrPfX1JpR/yDVAQLZF3YE+VCRkaEcRaEc1Bkq5kJLE/gHUNnm3+zdMKK9aMhR+h189BajFT9I/lJ0BIAcwLMQ2l3Yj73wvYnyWbjmo3XbjJ0eY8W5h/BrjMzLJ2VlnUo3PYuKqtuQN3OLm3X+/upK1DTdwjZsDyUyqec6GEF09syI3F92yUZdMJ62DE7XK6uCueMYse9occDNSOJk2TzuvAA1ohsS27Vw8Tqt1nSmHabjbFnGndFO5K3PzpJ4CUz1JBorMmHHLdmQwBHRTnMkKhQ2QvVOwlGW8DcP5FqbrJJvdjsuaDB97D7UPuQfMWVxWiURGZPMptIkVhKEJKCNQDIyTFKlyZLbV+p53gX4egWr7bX73rYYTy+fRt6NAzImHc31/acg9fC0EFH1/obMyd7VtOx4JfU3acYK4OL1wfhzUFbtqf+2dJ+YG3K/voIAkorej7to5G4ZgZG5J17dlDgasZyO9xT2bOM2geuh5N335H/05CBAo+D8a3teHrs9kVYNvlTICfznXj/qG+mEqQY0AQfnnlyCvvGfUD0jWq5FXOCj0rhgQshT513IJVZZQRF6DIzii0KmJkkZPKLNkNZ7LUKHHe3ulrkb3x2Kgo2PDk1VXwRPT09UzttAnIRgd6m8KBWMNkbgGj19b25mmG2vqxkaEs7LdVDE0VVGmSeKcTHfjguaJm3smpWsmdnzBsDSJIzDqMKW8o1bEecw0dHS0TGzyS4Z6n9NTNSaXDzlPw2BeyPLakJQRk0Wx9HurZUEAAA==",_n='"Courier New", Courier, monospace',xe=`"${te}", ${_n}`,_e=.6,ue=.08,he=.06,Wn=.03,Hn=.05;function Qe(t,e,n){let r=t/255,o=e/255,i=n/255;return(.2126*r+.7152*o+.0722*i)*100}var Z=[{hex:"#000000",name:"black",luminance:0,temperature:"neutral",r:0,g:0,b:0},{hex:"#0000AA",name:"blue",luminance:10,temperature:"cool",r:0,g:0,b:170},{hex:"#AA0000",name:"red",luminance:20,temperature:"warm",r:170,g:0,b:0},{hex:"#AA00AA",name:"magenta",luminance:25,temperature:"warm",r:170,g:0,b:170},{hex:"#FFFFFF",name:"white",luminance:100,temperature:"neutral",r:255,g:255,b:255},{hex:"#FFFF55",name:"yellow",luminance:93,temperature:"warm",r:255,g:255,b:85},{hex:"#55FFFF",name:"lightCyan",luminance:85,temperature:"cool",r:85,g:255,b:255},{hex:"#55FF55",name:"lightGreen",luminance:77,temperature:"cool",r:85,g:255,b:85},{hex:"#00AA00",name:"green",luminance:30,temperature:"cool",r:0,g:170,b:0},{hex:"#00AAAA",name:"cyan",luminance:40,temperature:"cool",r:0,g:170,b:170},{hex:"#5555FF",name:"lightBlue",luminance:45,temperature:"cool",r:85,g:85,b:255},{hex:"#FF5555",name:"lightRed",luminance:45,temperature:"warm",r:255,g:85,b:85},{hex:"#FF55FF",name:"lightMagenta",luminance:60,temperature:"warm",r:255,g:85,b:255}],Pn=Z.filter(t=>t.luminance<30||t.luminance>70),Bn={black:.2,white:.15,blue:.15,red:.15,magenta:.1,yellow:.1,lightCyan:.08,lightGreen:.07},Wt=Z,Xn=Z.filter(t=>t.temperature!=="neutral"),Yn=Z.filter(t=>t.temperature!=="neutral"),Ze=Z,Zo={dark:Z.filter(t=>t.luminance<30),light:Z.filter(t=>t.luminance>70)},tn={warm:Z.filter(t=>t.temperature==="warm"),cool:Z.filter(t=>t.temperature==="cool"),neutral:Z.filter(t=>t.temperature==="neutral")};function $n(t,e){let n=t.r-e.r,r=t.g-e.g,o=t.b-e.b;return Math.sqrt(n*n*.3+r*r*.59+o*o*.11)}function jn(t,e,n){let r=t.luminance,o=e.luminance,i=[];for(let s=0;s<n;s++){let c=s/(n-1),l=r+(o-r)*c,u=Z.filter(g=>g.temperature===t.temperature||g.temperature==="neutral"),C=u[0],M=Math.abs(C.luminance-l);for(let g of u){let h=Math.abs(g.luminance-l);h<M&&(M=h,C=g)}i.push(C)}return i}function en(t,e,n=4.5){let r=t.luminance/100,o=e.luminance/100,i=Math.max(r,o)+.05,s=Math.min(r,o)+.05;return i/s>=n}function de(t,e){return e[Math.floor(t()*e.length)]}function zn(t,e,n){let r=t(),o=0;for(let i of e)if(o+=n[i.name]||0,r<o)return i;return e[e.length-1]}function Ge(t,e,n){e/=100,n/=100;let r=e*Math.min(n,1-n),o=i=>{let s=(i+t/30)%12,c=n-r*Math.max(Math.min(s-3,9-s,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`#${o(0)}${o(8)}${o(4)}`}function Fe(t){let e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,r=parseInt(t.slice(5,7),16)/255,o=Math.max(e,n,r),i=Math.min(e,n,r),s,c,l=(o+i)/2;if(o===i)s=c=0;else{let u=o-i;switch(c=l>.5?u/(2-o-i):u/(o+i),o){case e:s=((n-r)/u+(n<r?6:0))/6;break;case n:s=((r-e)/u+2)/6;break;case r:s=((e-n)/u+4)/6;break}}return{h:s*360,s:c*100,l:l*100}}var Un={red:["cyan","lightCyan"],magenta:["green","lightGreen"],blue:["yellow"],lightRed:["cyan","lightCyan"],lightMagenta:["green","lightGreen"],lightBlue:["yellow"],cyan:["red","lightRed"],lightCyan:["red","lightRed"],green:["magenta","lightMagenta"],lightGreen:["magenta","lightMagenta"],yellow:["blue","lightBlue"],black:["white","yellow","lightCyan"],white:["black","blue","magenta"]};function Kn(t,e,n){let o=[];switch(e){case"value":{let i=t.luminance<50;o=Wt.filter(s=>i?s.luminance>60:s.luminance<40);break}case"temperature":{if(t.temperature==="neutral")o=Wt.filter(i=>i.temperature!=="neutral"&&Math.abs(i.luminance-t.luminance)>25);else{let i=t.temperature==="warm"?"cool":"warm";o=Wt.filter(s=>s.temperature===i&&Math.abs(s.luminance-t.luminance)>25)}break}case"complement":{let i=Un[t.name]||[];if(o=Wt.filter(s=>i.includes(s.name)),o.length===0){let s=t.luminance<50;o=Wt.filter(c=>s?c.luminance>60:c.luminance<40)}break}case"clash":{o=Wt.filter(i=>i.name!==t.name&&Math.abs(i.luminance-t.luminance)>20&&Math.abs(i.luminance-t.luminance)<50);break}}return o.sort((i,s)=>Math.abs(s.luminance-t.luminance)-Math.abs(i.luminance-t.luminance)),o.length>0?de(n,o):t.luminance<50?Z.find(i=>i.name==="white"):Z.find(i=>i.name==="black")}function Vn(t,e,n){if(n()<.4)return e;let r=Xn.filter(i=>i.name!==t.name&&i.name!==e.name&&Math.abs(i.luminance-t.luminance)>20);if(r.length===0)return e;let o=r.filter(i=>["yellow","lightCyan","lightMagenta","lightGreen"].includes(i.name));return o.length>0&&n()<.6?de(n,o):de(n,r)}function qn(t){let e=de(t,Yn),n;return e.luminance>50?n=Z.find(r=>r.name==="black"):e.luminance<30?n=t()<.75?Z.find(r=>r.name==="black"):Z.find(r=>r.name==="white"):n=t()<.6?Z.find(r=>r.name==="black"):Z.find(r=>r.name==="white"),{bg:n.hex,text:e.hex,accent:e.hex,strategy:`monochrome/${e.name}`,colorCount:2}}function Jn(t){let e=_(t);if(e()<.12)return qn(e);let n=zn(e,Pn,Bn),r=e(),o;r<.4?o="value":r<.68?o="temperature":r<.9?o="complement":o="clash";let i=Kn(n,o,e),s=Vn(n,i,e),c=s.hex===i.hex?2:3;return Math.abs(n.luminance-i.luminance)<25?{bg:n.luminance<50?"#000000":"#FFFFFF",text:n.luminance<50?"#FFFFFF":"#000000",accent:"#FFFF55",strategy:o,colorCount:c}:{bg:n.hex,text:i.hex,accent:s.hex,strategy:o,colorCount:c}}function nn(t,e,n){let r=[];for(let o=e;o<=n;o++)t%o===0&&r.push(o);return r}function Qn(t,e,n,r){let o=1200-n*2-290,i=1697-n*2-145*2,s=nn(o,20,600),c=nn(i,20,600);s.length===0&&s.push(8),c.length===0&&c.push(12);let l=_(r+9999),u=1+ue+he,C=_e/u,M=[];for(let p of s)for(let b of c){let f=Math.max(p/b,b/p),d=b*C;f<=3&&p>=d&&M.push({w:p,h:b})}if(M.length===0)return{cellW:8,cellH:12};M.sort((p,b)=>p.w*p.h-b.w*b.h);let g=l(),h;if(g<.03){let p=Math.max(1,Math.ceil(M.length*.1)),b=Math.floor(l()*p);h=M[b]}else if(g<.1){let p=Math.floor(M.length*.1),b=Math.floor(M.length*.25),f=p+Math.floor(l()*Math.max(1,b-p));h=M[Math.min(f,M.length-1)]}else if(g<.45){let p=Math.floor(M.length*.25),b=Math.floor(M.length*.75),f=p+Math.floor(l()*(b-p));h=M[Math.min(f,M.length-1)]}else if(g<.95){let p=Math.floor(M.length*.75),b=Math.floor(M.length*.9),f=p+Math.floor(l()*Math.max(1,b-p));h=M[Math.min(f,M.length-1)]}else{let p=Math.floor(M.length*.9),b=p+Math.floor(l()*(M.length-p));h=M[Math.min(b,M.length-1)]}return{cellW:h.w,cellH:h.h}}function Zn(t){let n=_(t+5555)();return n<.4?"normal":n<.7?"inverted":n<.8?"binary":n<.9?"sparse":"dense"}function to(t){return _(t+5556)()<.3}function We(t){let e=_(t+7777),n=e();if(n<.25){let r=.2+e()*.2;return{min:r,max:r+.1+e()*.2}}else if(n<.5){let r=.6+e()*.2;return{min:r,max:r+.1+e()*.1}}else return n<.75?{min:.1+e()*.2,max:.7+e()*.3}:{min:.3+e()*.2,max:.5+e()*.5}}function eo(t){let e=_(t+11111);if(!(e()>=.5))return{hasOverlap:!1,amount:"none"};let r=e(),o;return r<.2?o="5%":r<.4?o="25%":r<.6?o="50%":r<.8?o="75%":o="95%",{hasOverlap:!0,amount:o}}function fn(t){let e=_(t+2222);return Math.floor(4+e()*66)}function un(t){let e=_(t+6666),n=e();return n<.16?{type:"horizontal",jitter:3+e()*12}:n<.32?{type:"vertical",jitter:3+e()*12}:n<.44?{type:"diagonal",angle:e()<.5?45:135,jitter:5+e()*15}:n<.56?{type:"radial",focalX:.2+e()*.6,focalY:.2+e()*.6}:n<.68?{type:"grid",jitter:3+e()*10}:n<.8?{type:"clustered",clusterX:.15+e()*.7,clusterY:.15+e()*.7,spread:.2+e()*.4}:{type:"random"}}function ke(t){let e=t.toUpperCase();return Ze.find(n=>n.hex===e)||Ze[0]}function no(t,e,n){let r=_(t+3333),o=ke(e),i=ke(n),s=o.luminance>50,c=(u,C)=>s?C.luminance-u.luminance:u.luminance-C.luminance;if(r()<.5){let u=jn(o,i,6);return[u[0].hex,u[Math.floor(u.length*.33)].hex,u[Math.floor(u.length*.66)].hex,u[u.length-1].hex]}else{let u=i.temperature,C=u==="warm"?"cool":"warm",M=tn[u].filter(x=>en(o,x,2)).sort(c),g=tn[C].filter(x=>en(o,x,2)).sort(c),h=[],p=new Set;M.length>0?(h.push(M[0].hex),p.add(M[0].hex)):(h.push(i.hex),p.add(i.hex));let b=M.filter(x=>!p.has(x.hex));if(b.length>0){let x=b[Math.floor(b.length*.4)];h.push(x.hex),p.add(x.hex)}else h.push(i.hex);let f=g.filter(x=>!p.has(x.hex));if(f.length>0){let x=f[Math.floor(f.length*.5)];h.push(x.hex),p.add(x.hex)}else h.push(i.hex);let d=[...M,...g].filter(x=>!p.has(x.hex)).sort(c);return d.length>0?h.push(d[d.length-1].hex):h.push(i.hex),h}}function oo(t){return _(t+4444)()<.25}function hn(t){return .08+(.35-.08)*Math.exp(-.03*t)}function ro(t,e=0){let n=_(t+77777),r=hn(e);return n()<r}function io(t){let n=_(t+88888)();return n<.5?"background":n<.85?"text":"accent"}function Oe(t){let e=[0,51,102,153,204,255],n=e[0],r=Math.abs(t-n);for(let o of e){let i=Math.abs(t-o);i<r&&(r=i,n=o)}return n}function dn(t,e,n){let r=Oe(t),o=Oe(e),i=Oe(n);return"#"+r.toString(16).padStart(2,"0").toUpperCase()+o.toString(16).padStart(2,"0").toUpperCase()+i.toString(16).padStart(2,"0").toUpperCase()}function pe(t){let e=t.replace("#","");return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}}function le(t){let e=pe(t);return(.299*e.r+.587*e.g+.114*e.b)/255}function on(t,e,n){let r=pe(t),i=e*n*51,s=Math.max(0,Math.min(255,r.r+i)),c=Math.max(0,Math.min(255,r.g+i)),l=Math.max(0,Math.min(255,r.b+i));return dn(s,c,l)}function Ht(t,e,n,r){let i=_(t+(r==="background"?11111:r==="text"?22222:33333)),s=le(e),c=le(n),l;r==="background"?s<.3?l=i()<.75?1:-1:s>.7?l=i()<.75?-1:1:l=i()<.5?1:-1:r==="text"?c<.4?l=s>.5&&i()<.6?-1:1:l=s<.5&&i()<.6?1:-1:l=i()<.5?1:-1;let u=i(),C=u<.5?1:u<.85?2:3,M=on(e,l,C),g=le(M),h=Math.abs(g-c);if(r!=="accent"&&h<.2){let p=on(e,-l,C+1),b=le(p);if(Math.abs(b-c)>h)return p}return M}function so(t,e,n){let r={...e,anchorType:n,cgaBg:e.bg,cgaText:e.text,cgaAccent:e.accent};return n==="background"?(r.bg=e.bg,r.text=Ht(t,e.text,e.bg,"text"),r.accent=Ht(t+1,e.accent,e.bg,"accent")):n==="text"?(r.bg=Ht(t,e.bg,e.text,"background"),r.text=e.text,r.accent=Ht(t+1,e.accent,e.text,"accent")):(r.bg=Ht(t,e.bg,e.accent,"background"),r.text=Ht(t+1,e.text,r.bg,"text"),r.accent=e.accent),r}function lo(t,e){let n=pe(t),r=pe(e);return[.25,.5,.75,1].map(s=>{let c=Math.round(n.r+(r.r-n.r)*s),l=Math.round(n.g+(r.g-n.g)*s),u=Math.round(n.b+(r.b-n.b)*s);return dn(c,l,u)})}function ao(t){return _(t+9191)()<.008}function co(t){return _(t+9393)()<.008}function fo(t){let e=_(t+5555),n=.1+e()*.8,r=0,o=e()<.4,i=o?e()*180:null,s=o?.2+e()*.6:0,c=.3+e()*1.4;return{absorbency:n,intersectionThreshold:r,angleAffinity:i,affinityStrength:s,ceilingMultiplier:c}}function uo(t){let e=t.absorbency<.35?"Resistant":t.absorbency<.65?"Standard":"Absorbent",n=t.intersectionThreshold<.15?"Fine":t.intersectionThreshold<.35?"Medium":"Coarse",r=t.angleAffinity!==null?"Grain":"Uniform";return`${e}/${n}/${r}`}function pn(t,e,n){return t}var tr=[-1/1,-1/2,-1/4,-1/8,-1/16,1/64,1/32,1/16,1/8,1/4,1/2,1,2];function gn(t,e,n,r,o){let i=_(t+12345),s=i()<.6,c=!1,l=!1,u=!1,C=!1;if(s){let D=i();D<.33?c=!0:(D<.66||(c=!0),l=!0),c&&i()<.3&&(u=!0),l&&i()<.3&&(C=!0)}let M=[-1/16,-1/8,-1/4,-1/2],g=D=>{if(D)return M[Math.floor(i()*M.length)];let S=i();return S<.4?0:S<.525?1/64:S<.65?1/32:S<.75?1/16:S<.85?1/8:S<.9?1/4:S<.95?1/2:S<.98?1:2},h=e,p=n,b=c?g(u):0,f=h*b,d=h+f,x=d>0?Math.max(1,Math.floor((r+f)/d)):1,y=x>1?f:0;x===1&&h<r&&(h=r,y=0);let A=l?g(C):0,I=p*A,k=p+I,v=k>0?Math.max(1,Math.floor((o+I)/k)):1,G=v>1?I:0;v===1&&p<o&&(p=o,G=0);let W=x,H=v,P=y,L=G,F=W*h+(W>1?(W-1)*P:0),a=H*p+(H>1?(H-1)*L:0),st=r-F,w=o-a;return{cols:W,rows:H,cellWidth:h,cellHeight:p,colGap:P,rowGap:L,strideX:h+P,strideY:p+L,gridOffsetX:st>0?st/2:0,gridOffsetY:w>0?w/2:0,actualGridWidth:F,actualGridHeight:a}}function xn(t){let e=Object.values(t).filter(c=>c>0);if(e.length===0)return{t1:1,t2:2,t3:3,tExtreme:999};e.sort((c,l)=>c-l);let n=(c,l)=>{let u=Math.floor(c.length*l);return c[Math.min(u,c.length-1)]},r=n(e,.7),o=n(e,.94),i=n(e,.94)+1,s=n(e,.985);return{t1:Math.max(.01,r),t2:Math.max(r+.01,o),t3:Math.max(o+.01,i),tExtreme:Math.max(i+.01,s)}}function Mt(t,e){return t===0?0:t<=e.t1?1:t<=e.t2?2:3}var ho=1103515245n,po=12345n,rn=0x7fffffffn;function _(t){let e=BigInt(Math.abs(t)||1);return()=>(e=e*ho+po&rn,Number(e)/Number(rn))}function mn(t,e,n){let o=_(t+22222)(),i;o<.6?i=0:o<.8?i=1:o<.9?i=2:o<.97?i=3:i=5;let s=_(t+33333),c=s(),l;c<.22?l="ltr":c<.44?l="rtl":c<.65?l="center":c<.8?l="alternate":c<.9?l="diagonal":c<.96?l="randomMid":l="checkerboard";let u=s()<.5,C=Math.floor(s()*e),M=s()<.5,g=_(t+11111),h=g()>=.65,b=(()=>{if(!h)return 1;let w=g();return w<.1?.95:w<.2?.75:w<.3?.65:w<.6?.5:w<.8?.25:.05})(),f=[.95,.75,.5,.25,.05],d=h?Math.floor(g()*5):0,x=f.indexOf(b),y=Math.floor(g()*3)+1,A=Math.floor(g()*3),I=Math.floor(g()*4)+1,k=[],v=[],G=[],W=.3+g()*.4,H=.3+g()*.4,P=.3+g()*.4;for(let w=0;w<20;w++)k.push(g()<W),v.push(g()<H),G.push(g()<P);let L=Math.floor(g()*2),F=g()<.1;return{cellOverflowAmount:i,drawDirectionMode:l,hasOverlap:h,invertedSingleCharOnEmpty:F,getOverlapFactor:(w,D)=>{if(!h)return 1;let S=x===-1?0:x;switch(d){case 1:A===1?k[w%20]&&(S=(S+y)%f.length):A===2?S=(S+w%3*y)%f.length:S=(S+Math.floor(w/I)*y)%f.length;break;case 2:A===1?v[D%20]&&(S=(S+y)%f.length):A===2?S=(S+D%3*y)%f.length:S=(S+Math.floor(D/I)*y)%f.length;break;case 3:if(A===1){let K=k[w%20],j=v[D%20];(L===0?K||j:K!==j)&&(S=(S+y)%f.length)}else(w+D)%(A===2?3:2)===0&&(S=(S+y)%f.length);break;case 4:A===1?G[(w+D)%20]&&(S=(S+y)%f.length):(w+D)%(A===2?5:I+1)===0&&(S=(S+y)%f.length);break}return f[S]||b},getCellDirection:(w,D)=>{if(l==="ltr")return"ltr";if(l==="rtl")return"rtl";if(l==="center")return"center";if(l==="alternate")return w%2===1!==u?"rtl":"ltr";if(l==="diagonal"){let S=(C+(M?w:-w)+e*100)%e;return D<S?"ltr":"rtl"}if(l==="randomMid"){let S=_(t+55555+w),K=Math.floor(S()*e);return D<K?"ltr":"rtl"}return l==="checkerboard"?(w+D)%2===0?"ltr":"rtl":"ltr"}}}var tt={add:(t,e)=>({x:t.x+e.x,y:t.y+e.y}),sub:(t,e)=>({x:t.x-e.x,y:t.y-e.y}),scale:(t,e)=>({x:t.x*e,y:t.y*e}),dot:(t,e)=>t.x*e.x+t.y*e.y,len:t=>Math.sqrt(t.x*t.x+t.y*t.y),dist:(t,e)=>tt.len(tt.sub(t,e)),norm:t=>{let e=tt.len(t);return e>1e-4?tt.scale(t,1/e):{x:0,y:0}},perp:t=>({x:-t.y,y:t.x}),mid:(t,e)=>({x:(t.x+e.x)/2,y:(t.y+e.y)/2}),lerp:(t,e,n)=>({x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}),copy:t=>({x:t.x,y:t.y}),eq:(t,e)=>tt.dist(t,e)<.5};function He(t,e,n,r){let o=tt.sub(e,t),i=tt.sub(r,n),s=o.x*i.y-o.y*i.x;if(Math.abs(s)<1e-4)return null;let c=tt.sub(n,t),l=(c.x*i.y-c.y*i.x)/s,u=(c.x*o.y-c.y*o.x)/s;return l>=.001&&l<=.999&&u>=.001&&u<=.999?{point:tt.add(t,tt.scale(o,l)),t:l,u}:null}function sn(t,e){let n=t.reduce((o,i)=>o+i,0);if(n<=0)return 0;let r=e()*n;for(let o=0;o<t.length;o++)if(r-=t[o],r<=0)return o;return t.length-1}var go=0,xo=1,mo=2,yo=3;function pt(t,e,n,r){switch(t){case go:return{x:e*n,y:0};case xo:return{x:n,y:e*r};case mo:return{x:(1-e)*n,y:r};case yo:return{x:0,y:(1-e)*r};default:return{x:e*n,y:0}}}function De(t,e,n){switch(t){case 0:return{x:0,y:0};case 1:return{x:e,y:0};case 2:return{x:e,y:n};case 3:return{x:0,y:n};default:return{x:0,y:0}}}function yn(t,e){return{x:t.p1.x+(t.p2.x-t.p1.x)*e,y:t.p1.y+(t.p2.y-t.p1.y)*e}}function Le(t,e){let n=e.x-t.x,r=e.y-t.y,o=Math.atan2(r,n)*180/Math.PI;return o<0&&(o+=180),o>=180&&(o-=180),o}function Mo(t,e,n,r,o,i,s){let l=(()=>{if(!s)return[0,1,2,3];switch(s.type){case"horizontal":return[1,3];case"vertical":return[0,2];case"grid":return t%2===0?[1,3]:[0,2];case"diagonal":return[0,1,2,3];case"radial":case"clustered":case"random":default:return[0,1,2,3]}})();if(s&&s.type==="radial"){let g=s.focalX*r,h=s.focalY*o;if(t<10||e.length===0||i()<.6){let p=[{edge:0,dist:h},{edge:1,dist:r-g},{edge:2,dist:o-h},{edge:3,dist:g}];p.sort((x,y)=>x.dist-y.dist);let b=i(),f=b<.5?p[0].edge:b<.8?p[1].edge:p[Math.floor(i()*4)].edge,d;return f===0||f===2?d=.1+g/r*.8+(i()-.5)*.3:d=.1+h/o*.8+(i()-.5)*.3,d=Math.max(.05,Math.min(.95,d)),{point:pt(f,d,r,o),type:"edge",edge:f,t:d}}}if(s&&s.type==="clustered"){let g=s.clusterX*r,h=s.clusterY*o,p=s.spread;if(t<15||i()<.7){let b=[{edge:0,weight:1+(1-Math.abs(h/o))*2},{edge:1,weight:1+g/r*2},{edge:2,weight:1+h/o*2},{edge:3,weight:1+(1-g/r)*2}],f=b.reduce((A,I)=>A+I.weight,0),d=i()*f,x=0;for(let A of b)if(d-=A.weight,d<=0){x=A.edge;break}let y;return x===0||x===2?y=g/r+(i()-.5)*p:y=h/o+(i()-.5)*p,y=Math.max(.05,Math.min(.95,y)),{point:pt(x,y,r,o),type:"edge",edge:x,t:y}}}let u=Math.max(.2,1-t*.015),C=s&&(s.type==="horizontal"||s.type==="vertical"||s.type==="grid");if(C||i()<u||e.length===0&&n.length===0){let g=C?0:s&&s.type==="diagonal"?.5:.15;if(i()<g){let p=Math.floor(i()*4);return{point:De(p,r,o),type:"corner",corner:p}}else{let p=l[Math.floor(i()*l.length)],b=s&&s.jitter?s.jitter/100:0,f=.05+i()*.9,d=Math.max(.05,Math.min(.95,f+(i()-.5)*b));return{point:pt(p,d,r,o),type:"edge",edge:p,t:d}}}else if(n.length>0&&i()<.35){let h=n[Math.floor(i()*n.length)];return{point:{x:h.x,y:h.y},type:"intersection",intersectionIndex:n.indexOf(h)}}else if(e.length>0){let h=e[Math.floor(i()*e.length)],p=.1+i()*.8;return{point:yn(h,p),type:"crease",creaseIndex:e.indexOf(h),t:p}}else{let h=l[Math.floor(i()*l.length)],p=.05+i()*.9;return{point:pt(h,p,r,o),type:"edge",edge:h,t:p}}}function bo(t,e,n,r,o,i,s,c,l){let u=Math.min(o,i)*.15,C=f=>f===0||f===2,M=f=>f===1||f===3;if(l&&(l.type==="horizontal"||l.type==="vertical"||l.type==="grid")){let f=l.type==="horizontal"||l.type==="grid"&&e%2===0;if(t.type==="edge"){let d=(t.edge+2)%4,x=M(t.edge);if(f&&x||!f&&!x){let y=l.jitter?l.jitter/100:0,A=t.t!==void 0?t.t:.5,I=Math.max(.05,Math.min(.95,A+(s()-.5)*y));return I=1-I,{point:pt(d,I,o,i),type:"edge",edge:d}}}}if(l&&l.type==="diagonal"){let f=l.angle||(s()<.5?45:135);if(t.type==="corner"){let d=(t.corner+2)%4;return{point:De(d,o,i),type:"corner"}}else if(t.type==="edge"){let d=l.jitter?(s()-.5)*l.jitter:0,x=(f+d)*Math.PI/180,y=t.point.x,A=t.point.y,I=Math.cos(x),k=Math.sin(x),v=null,G=0,W=[{edge:0,y:0},{edge:2,y:i},{edge:3,x:0},{edge:1,x:o}];for(let H of W){let P=null;if(H.y!==void 0){let L=(H.y-A)/k;if(L>0){let F=y+I*L;F>=0&&F<=o&&(P={x:F,y:H.y})}}else{let L=(H.x-y)/I;if(L>0){let F=A+k*L;F>=0&&F<=i&&(P={x:H.x,y:F})}}if(P){let L=tt.dist(t.point,P);L>G&&L>=u&&(G=L,v=P)}}if(v)return{point:v,type:"edge"}}}if(l&&l.type==="radial"){let f=l.focalX*o,d=l.focalY*i,x={x:f,y:d},y=t.point.x-f,A=t.point.y-d,I=Math.sqrt(y*y+A*A);if(I>0){let k=y/I,v=A/I,G=1/0;k>0&&(G=Math.min(G,(o-t.point.x)/k)),k<0&&(G=Math.min(G,-t.point.x/k)),v>0&&(G=Math.min(G,(i-t.point.y)/v)),v<0&&(G=Math.min(G,-t.point.y/v));let W={x:Math.max(0,Math.min(o,t.point.x+k*G*.95)),y:Math.max(0,Math.min(i,t.point.y+v*G*.95))};if(tt.dist(t.point,W)>=u)return{point:W,type:"edge"}}}if(l&&l.type==="clustered"){let f=l.clusterX*o,d=l.clusterY*i,x={x:f,y:d},y=[];for(let I=0;I<4;I++)for(let k=0;k<3;k++){let v=.1+s()*.8,G=pt(I,v,o,i),W=Co(x,t.point,G),H=Math.max(o,i)*.5,P=Math.max(.1,1-W/H)*3;y.push({point:G,type:"edge",edge:I,weight:P})}let A=y.filter(I=>tt.dist(t.point,I.point)>=u);if(A.length>0){let I=A.map(v=>v.weight),k=sn(I,s);return A[k]}}let g=[];if(t.type==="edge"){let f=(t.edge+2)%4,d=(t.edge+1)%4,x=(t.edge+3)%4,y=e<3?3:1.5;for(let I=0;I<3;I++){let k=.1+s()*.8;g.push({point:pt(f,k,o,i),type:"edge",edge:f,weight:y})}let A=1;for(let I=0;I<2;I++){let k=.1+s()*.8;g.push({point:pt(d,k,o,i),type:"edge",edge:d,weight:A}),g.push({point:pt(x,k,o,i),type:"edge",edge:x,weight:A})}}else if(t.type==="corner"){let f=(t.corner+2)%4;g.push({point:De(f,o,i),type:"corner",weight:2});for(let d=0;d<4;d++)if(!(d===t.corner||d===(t.corner+3)%4)){let y=.2+s()*.6;g.push({point:pt(d,y,o,i),type:"edge",edge:d,weight:1.5})}}else{for(let f=0;f<4;f++){let d=.1+s()*.8;g.push({point:pt(f,d,o,i),type:"edge",edge:f,weight:1})}if(n.length>1&&e>3)for(let f=0;f<Math.min(3,n.length);f++){let d=Math.floor(s()*n.length),x=n[d];if(t.type==="crease"&&t.creaseIndex===d)continue;let y=.15+s()*.7;g.push({point:yn(x,y),type:"crease",creaseIndex:d,weight:.6})}}if(n.length>0&&c)for(let f of g){let d=Le(t.point,f.point);for(let x of n){let y=Le(x.p1,x.p2),A=Math.abs(d-y);A>90&&(A=180-A),c.parallel>0&&A<15&&(f.weight*=1+c.parallel),c.perpendicular>0&&A>75&&(f.weight*=1+c.perpendicular)}}let h=g.filter(f=>tt.dist(t.point,f.point)>=u);if(h.length===0){for(let d=0;d<4;d++){let y=pt(d,.5,o,i);if(tt.dist(t.point,y)>=u)return{point:y,type:"edge",edge:d}}let f=t.type==="edge"?(t.edge+2)%4:0;return{point:pt(f,.5,o,i),type:"edge",edge:f}}let p=h.map(f=>f.weight),b=sn(p,s);return h[b]}function Co(t,e,n){let r=n.x-e.x,o=n.y-e.y,i=r*r+o*o;if(i===0)return tt.dist(t,e);let s=((t.x-e.x)*r+(t.y-e.y)*o)/i;s=Math.max(0,Math.min(1,s));let c={x:e.x+s*r,y:e.y+s*o};return tt.dist(t,c)}function vo(t){let e=[];for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){let o=He(t[n].p1,t[n].p2,t[r].p1,t[r].p2);o&&e.push({x:o.point.x,y:o.point.y,crease1:n,crease2:r})}return e}function Pe(t,e,n,r,o={min:0,max:1},i=null,s=null){if(!t||!e||t<=0||e<=0)return{creases:[],finalShape:[]};let c=i||un(r),l=fn(r),u=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}],C=[],M=null,g=null;if(!n||n<=0)return{creases:[],finalShape:u,maxFolds:l,firstFoldTarget:null,lastFoldTarget:null};let h=_(r),p=_(r+8888),b=_(r+6666),f=s||{absorbency:1,intersectionThreshold:0,angleAffinity:null,affinityStrength:0,ceilingMultiplier:1},d=[],x=_(r+1111);for(let v=0;v<l;v++)d[v]=.001+x()*.25;let y=_(r+2222),A={parallel:y()*.8,perpendicular:y()*.8},I=Math.max(t,e)*.05,k=[];for(let v=0;v<n;v++){let G=v%l,W=Math.floor(v/l);if(G===0&&W>0)for(let K of C)K.reductionMultiplier!==void 0&&(K.weight=Math.max(.01,K.weight*K.reductionMultiplier));v%5===0&&C.length>1&&(k=vo(C));let H=Mo(v,C,k,t,e,h,c),P=bo(H,v,C,k,t,e,h,A,c),L=H.point,F=P.point,st=b()<f.absorbency,w=o.min+p()*(o.max-o.min);if(f.angleAffinity!==null&&f.affinityStrength>0){let K=Le(L,F),j=Math.abs(K-f.angleAffinity);j>90&&(j=180-j);let q=1-j/90*f.affinityStrength;w*=q}if(st&&w>.01&&(C.push({p1:tt.copy(L),p2:tt.copy(F),depth:C.length,weight:w,cyclePosition:G,reductionMultiplier:d[G],anchorType:H.type,terminusType:P.type}),C.length>1)){let K=C[C.length-1];for(let j=0;j<C.length-1;j++){let q=He(K.p1,K.p2,C[j].p1,C[j].p2);q&&k.push({x:q.point.x,y:q.point.y,crease1:j,crease2:C.length-1})}}let D=tt.mid(L,F),S={x:Math.max(I,Math.min(t-I,D.x)),y:Math.max(I,Math.min(e-I,D.y))};v===0&&M===null&&(M=S),g=S}return{creases:C,finalShape:u,maxFolds:l,firstFoldTarget:M,lastFoldTarget:g}}function Ao(t){let e=[];for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){let o=He(t[n].p1,t[n].p2,t[r].p1,t[r].p2);if(o){let i=t[n].weight||1,s=t[r].weight||1;e.push({x:o.point.x,y:o.point.y,depth1:t[n].depth,depth2:t[r].depth,gap:Math.abs(t[r].depth-t[n].depth),weight:i+s})}}return e}function Mn(t,e,n,r,o,i=null,s=null){let c=Ao(t),l=s||{intersectionThreshold:0,ceilingMultiplier:1},u=c.filter(f=>f.weight>=l.intersectionThreshold),C={},M={},g={};for(let f of u){let d=Math.floor(f.x/r),x=Math.floor(f.y/o);if(d>=0&&d<e&&x>=0&&x<n){let y=`${d},${x}`;C[y]=(C[y]||0)+f.weight,M[y]=Math.max(M[y]||0,f.gap),g[y]=(g[y]||0)+1}}let p=e*n*.5*l.ceilingMultiplier,b=Object.values(C).reduce((f,d)=>f+d,0);if(b>p&&b>0){let f=p/b,d=f+(1-f)*.3;for(let x of Object.keys(C))C[x]*=d}return{activeCreases:t,intersections:u,cellWeights:C,cellMaxGap:M,cellIntersectionCounts:g,destroyed:0,maxFolds:i}}function bn(t,e,n,r,o){let i=document.createElement("canvas"),s=i.getContext("2d"),c=Math.max(1,Math.round(r*2)),l=c*2;i.width=l,i.height=l,s.fillStyle=o,s.fillRect(0,0,c,c),s.fillRect(c,c,c,c),t.globalAlpha=.05;let u=t.createPattern(i,"repeat");t.fillStyle=u,t.fillRect(0,0,e,n),t.globalAlpha=1}function Be({folds:t,seed:e,outputWidth:n,outputHeight:r,bgColor:o,textColor:i,accentColor:s,cellWidth:c,cellHeight:l,renderMode:u,showEmptyCells:C=!1,multiColor:M,levelColors:g,foldStrategy:h=null,paperProperties:p=null,padding:b=0,showCreases:f=!1,showPaperShape:d=!1,showFoldTargets:x=!1,showIntersections:y=!1,showGrid:A=!1,showHitCounts:I=!1,showCellOutlines:k=!1,showCreaseLines:v=!1,fontFamily:G=xe,linesOnlyMode:W=!1,analyticsMode:H=!1,skipCells:P=null,skipBackground:L=!1}){let F=document.createElement("canvas"),a=F.getContext("2d"),st=2;F.width=n*st,F.height=r*st,a.setTransform(st,0,0,st,0,0);let w=n/1200,D=r/1697;L||(a.fillStyle=o,a.fillRect(0,0,n,r),bn(a,n,r,w,i));let S=1200-b*2-145*2,K=1697-b*2-145*2,j=gn(e,c,l,S,K),{cols:q,rows:ct,strideX:Pt,strideY:Bt,gridOffsetX:ye,gridOffsetY:Me}=j,Xt=j.cellWidth,Yt=j.cellHeight,$t=S*w,Et=K*D,B=(b+145+ye)*w,Y=(b+145+Me)*D,xt=Xt*w,lt=Yt*D,Ct=Pt*w,mt=Bt*D,wt=We(e),vt=pn(p,q,ct),Ot=j.actualGridWidth,kt=j.actualGridHeight,{creases:It,finalShape:be,maxFolds:$e,firstFoldTarget:Rt,lastFoldTarget:Tt}=Pe(Ot,kt,t,e,wt,h,vt),je=It.map(E=>({...E,p1:{x:E.p1.x*w,y:E.p1.y*D},p2:{x:E.p2.x*w,y:E.p2.y*D}})),ne=null;if(Rt){let E=Math.max(0,Math.min(q-1,Math.floor(Rt.x/Pt))),R=Math.max(0,Math.min(ct-1,Math.floor(Rt.y/Bt)));ne=`${E},${R}`}let jt=null;if(Tt){let E=Math.max(0,Math.min(q-1,Math.floor(Tt.x/Pt))),R=Math.max(0,Math.min(ct-1,Math.floor(Tt.y/Bt)));jt=`${E},${R}`}let{activeCreases:bt,intersections:z,cellWeights:ft,cellMaxGap:ut}=Mn(je,q,ct,Ct,mt,$e,p),yt=new Set;if(Object.keys(ut).length>0){let E=Math.max(...Object.values(ut));for(let[R,T]of Object.entries(ut))T===E&&yt.add(R)}let ot=1+ue+he,et=lt/ot;a.font=`${et}px ${G}`,a.textBaseline="top";let U=[" ","\u2591","\u2592","\u2593"],Q=et<30?2:3,N=et*_e,zt=et*ue,Ce=et*he,wn=et*Wn,Ut=et*Hn,St=xn(ft),oe=mn(e,q,u),{cellOverflowAmount:ve,drawDirectionMode:Kt,invertedSingleCharOnEmpty:Vt,getOverlapFactor:Ae,getCellDirection:ze}=oe,Gt=(E,R)=>g&&g.length>0?g[Math.min(E,3)]:i,Ft=_(e+22222),qt=Ft()<.25,In=Math.round(2+Ft()*2)*w,Rn=Math.round(1+Ft()*2)*D,Tn=qt?.4+Ft()*.3:0,Sn=(E,R)=>{let T=_(e+22222+E*1e3+R),X=Math.floor(T()*3);return{x:X!==1?In:0,y:X!==0?Rn:0}},Gn=qt?(()=>{if(s&&s!==i)return s;let E=ke(i),R=Z.filter(nt=>nt.hex!==i&&nt.hex!==o&&$n(nt,E)>100),T=Math.floor(Ft()*R.length);return(R.length>0?R[T]:Z[0]).hex})():null,Ue=(b+145)*w,Ee=(b+145)*D,we=Ue+Ut,Fn=Ee+zt,Ie=Ue+$t,Vo=Ee+Et-Ce;if(W){let E=O=>{let $=parseInt(O.slice(1,3),16),rt=parseInt(O.slice(3,5),16),J=parseInt(O.slice(5,7),16);return Qe($,rt,J)},R=E(o),T=E(i),X=E(s),nt=Math.abs(R-T)>Math.abs(R-X)?i:s,ht=2*w;if(bt.length>0){a.strokeStyle=nt,a.lineWidth=ht,a.globalAlpha=1,a.lineCap="round";for(let O of bt)a.beginPath(),a.moveTo(B+O.p1.x,Y+O.p1.y),a.lineTo(B+O.p2.x,Y+O.p2.y),a.stroke()}a.globalAlpha=1}else if(H){let E=2*w;a.strokeStyle=s,a.lineWidth=1,a.globalAlpha=.4;for(let T=0;T<=q;T++){let X=B+T*Ct;a.beginPath(),a.moveTo(X,Y),a.lineTo(X,Y+Et),a.stroke()}for(let T=0;T<=ct;T++){let X=Y+T*mt;a.beginPath(),a.moveTo(B,X),a.lineTo(B+$t,X),a.stroke()}if(a.globalAlpha=1,bt.length>0){a.strokeStyle=s,a.lineWidth=E,a.globalAlpha=1,a.lineCap="round";for(let T of bt)a.beginPath(),a.moveTo(B+T.p1.x,Y+T.p1.y),a.lineTo(B+T.p2.x,Y+T.p2.y),a.stroke()}let R=Math.floor(Math.min(xt*.45,lt*.7));a.font=`bold ${R}px monospace`,a.textAlign="center",a.textBaseline="middle",a.fillStyle=s;for(let T=0;T<ct;T++)for(let X=0;X<q;X++){let nt=Math.round(B+X*Ct+xt/2),ht=Math.round(Y+T*mt+lt/2),O=`${X},${T}`,$=ft[O]||0;a.fillText(Math.round($).toString(),nt,ht)}a.textAlign="left",a.textBaseline="top"}else if(I){let E=Math.floor(Math.min(xt*.45,lt*.7));a.font=`bold ${E}px monospace`,a.textAlign="center",a.textBaseline="middle",a.fillStyle=i;for(let R=0;R<ct;R++)for(let T=0;T<q;T++){let X=Math.round(B+T*Ct+xt/2),nt=Math.round(Y+R*mt+lt/2),ht=`${T},${R}`,O=ft[ht]||0;a.fillText(Math.round(O).toString(),X,nt)}a.textAlign="left",a.textBaseline="top"}else{let E=Math.max(B,we),R=Math.max(Y,Fn);for(let T=0;T<ct;T++){let X=Math.round(R+T*mt);if(!(X>Ee+Et))for(let nt=0;nt<q;nt++){let ht=Math.round(E+nt*Ct),O=`${nt},${T}`;if(P&&P.has(O))continue;let $=ft[O]||0,rt=null,J=i,V=-1,Nt=!1;if(ne===O)V=$>0?Mt($,St):2,rt=U[Math.min(Math.max(V,2),Q)],J=s;else if(u==="normal")if(V=Mt($,St),V===0?rt=null:rt=U[Math.min(V,Q)],J=Gt(V,O),$>=1.5){let _t=$-1.5,Dt=30+Math.min(_t*300,150),at=Fe(i);J=Ge((at.h+Dt+360)%360,Math.min(100,at.s+20),Math.min(85,at.l+10))}else yt.has(O)&&$>0?J=s:jt===O&&(J=i);else if(u==="binary")$===0?C&&(rt=U[1],V=0,Nt=!0,J=i):(V=Q,rt=U[V],J=Gt(V,O),yt.has(O)&&(J=s));else if(u==="inverted")if(V=Math.min(3-Mt($,St),Q),rt=U[V],J=Gt(V,O),$>=1.5){let _t=$-1.5,Dt=30+Math.min(_t*300,150),at=Fe(i);J=Ge((at.h+Dt+360)%360,Math.min(100,at.s+20),Math.min(85,at.l+10))}else yt.has(O)&&$>0&&(J=s);else if(u==="sparse")V=Mt($,St),V===1?(rt=U[1],J=Gt(1,O),yt.has(O)&&(J=s)):rt=null;else if(u==="dense")if(V=Mt($,St),V>=2)if(rt=U[Math.min(V,Q)],J=Gt(V,O),$>=1.5){let _t=$-1.5,Dt=30+Math.min(_t*300,150),at=Fe(i);J=Ge((at.h+Dt+360)%360,Math.min(100,at.s+20),Math.min(85,at.l+10))}else yt.has(O)&&(J=s);else rt=null;if(rt){if(ne===O||jt===O)a.fillStyle=J;else{let it=Gt(Mt($,St),O);a.fillStyle=yt.has(O)&&$>0?s:it}Nt&&(a.globalAlpha=.1,a.fillStyle=i);let _t=a.measureText(rt).width,Dt=ht+xt,at=Math.min(Dt,Ie),Jt=at-ht;if(Jt<N*.5)continue;let kn=Nt||$===0&&u!=="inverted",Re=u==="inverted"&&$===0&&Vt,Dn=kn||Re?1:Ae(T,nt),Ke=N*Dn,Te=Math.max(1,Math.floor((Jt-N)/Ke)+1),Ln=(Te-1)*Ke+N,At=(Jt-Ln)/N>.3?Te+1:Te,Lt=At<=1?N:(Jt-N)/(At-1),Ve=Nt||Re?0:ve*xt,qe=0;Ve>0&&(qe=Math.ceil(Ve/Lt));let Nn=Re?1:At+qe,Je=ze(T,nt),re=ht+Jt/2;for(let it=0;it<Nn&&V>=0;it++){let Se=rt;V>=2&&it>0&&it%2===0&&(Se=U[Math.max(0,V-1)]);let dt;if(Je==="center")if(it<At){let gt=Math.floor((it+1)/2)*Lt;it%2===0?dt=re+(it===0?-N/2:gt-N/2):dt=re-gt-N/2}else{let gt=it-At,ie=Math.floor(At/2)*Lt,se=Math.floor((gt+1)/2)*Lt;if(gt%2===0){if(dt=re+ie+se,dt+N>Ie)break}else if(dt=re-ie-se-N,dt<we)break}else if(it<At)dt=ht+it*Lt;else if(Je==="rtl"){let gt=it-At;if(dt=ht-(gt+1)*Lt,dt<we)break}else{let gt=it-At;if(dt=at+gt*Lt,dt+N>Ie)break}if(qt&&!Nt){let gt=Sn(T,nt),ie=a.globalAlpha,se=a.fillStyle;a.globalAlpha=Tn,a.fillStyle=Gn,a.fillText(Se,dt+gt.x,X+gt.y),a.globalAlpha=ie,a.fillStyle=se}a.fillText(Se,dt,X)}Nt&&(a.globalAlpha=1)}}}}if(k){a.strokeStyle=s,a.lineWidth=.5,a.globalAlpha=1;for(let E=0;E<ct;E++)for(let R=0;R<q;R++){let T=Math.round(B+R*Ct),X=Math.round(Y+E*mt);a.strokeRect(T,X,xt,lt)}}if(v&&bt.length>0){let R=_(e+9292)()<.6;a.strokeStyle=R?s:i,a.lineWidth=1.5*w,a.globalAlpha=.85,a.lineCap="round";for(let T of bt)a.beginPath(),a.moveTo(B+T.p1.x,Y+T.p1.y),a.lineTo(B+T.p2.x,Y+T.p2.y),a.stroke();a.globalAlpha=1}if(f){let E=O=>{let $=parseInt(O.slice(1,3),16),rt=parseInt(O.slice(3,5),16),J=parseInt(O.slice(5,7),16);return Qe($,rt,J)},R=E(o),T=E(i),X=E(s),nt=Math.abs(R-T)>Math.abs(R-X)?i:s,ht=2*w;a.strokeStyle=nt,a.lineWidth=ht,a.globalAlpha=1,a.lineCap="round";for(let O of bt)a.beginPath(),a.moveTo(B+O.p1.x,Y+O.p1.y),a.lineTo(B+O.p2.x,Y+O.p2.y),a.stroke()}if(d){let E=be.map(R=>({x:R.x*w,y:R.y*D}));if(E.length>=3){a.strokeStyle="#00ffff",a.lineWidth=2,a.globalAlpha=.9,a.beginPath(),a.moveTo(B+E[0].x,Y+E[0].y);for(let R=1;R<E.length;R++)a.lineTo(B+E[R].x,Y+E[R].y);a.closePath(),a.stroke(),a.fillStyle="#00ffff",a.globalAlpha=.15,a.fill(),a.globalAlpha=1}}if(A){a.strokeStyle=i,a.lineWidth=1,a.globalAlpha=.3;for(let E=0;E<=q;E++){let R=B+E*Ct;a.beginPath(),a.moveTo(R,Y),a.lineTo(R,Y+Et),a.stroke()}for(let E=0;E<=ct;E++){let R=Y+E*mt;a.beginPath(),a.moveTo(B,R),a.lineTo(B+$t,R),a.stroke()}a.globalAlpha=1}if(x){let E=8*w;if(a.lineWidth=2,a.globalAlpha=1,Rt){let R=B+Rt.x*w,T=Y+Rt.y*D;a.strokeStyle="#00ff00",a.beginPath(),a.arc(R,T,E,0,Math.PI*2),a.stroke()}if(Tt){let R=B+Tt.x*w,T=Y+Tt.y*D;a.strokeStyle="#00ff00",a.beginPath(),a.arc(R,T,E,0,Math.PI*2),a.stroke()}}let On={grid:{cols:q,rows:ct,colGap:j.colGap,rowGap:j.rowGap},drawDirection:Kt,foldStrategy:h?.type||"random",multiColor:M,showCreaseLines:v,creaseCount:It.length};return{canvas:F,dataUrl:F.toDataURL("image/png"),settings:On}}function Xe(t,e=1200,n=1697,r=0,o=null){let i=We(t),s=un(t),c=fn(t),l=fo(t),u=o;if(u===null){let P=_(t+9999);u=Math.floor(1+P()*500)}let C=e-145*2,M=n-145*2,{creases:g}=Pe(C,M,u,t,i,s,l),h=g.length,p=hn(h),b=ro(t,h),f=Jn(t),d,x=null;b?(x=io(t),d=so(t,f,x)):d=f;let y=b?!1:oo(t),A=null;b?A=lo(d.bg,d.text):y&&(A=no(t,d.bg,d.text));let I=Qn(e,n,0,t),k=Zn(t),v=to(t),G=ao(t),W=co(t),H=eo(t);return{seed:t,palette:d,cells:I,renderMode:k,showEmptyCells:v,weightRange:i,foldStrategy:s,gradientMode:b,gradientProbability:p,creaseCount:h,multiColor:y,levelColors:A,maxFolds:c,paperProperties:l,showCreaseLines:G,analyticsMode:W,overlapInfo:H,folds:u}}function Eo(t,e,n,r=""){let o=Xe(e,1200,1697,0,n),i=uo(o.paperProperties),s=Math.round(o.gradientProbability*100),c;return o.gradientMode?c=`gradient/${o.palette.anchorType||"background"} (${s}% @ ${o.creaseCount} creases)`:c=`cga/${o.palette.strategy} (${s}% gradient @ ${o.creaseCount} creases)`,{name:`Fold #${t}`,description:"On-chain generative paper folding art",image:r?`${r}/${t}`:"",attributes:[{trait_type:"Fold Strategy",value:o.foldStrategy.type},{trait_type:"Render Mode",value:o.renderMode},{trait_type:"Multi-Color",value:o.multiColor?"Yes":"No"},{trait_type:"Cell Size",value:`${o.cells.cellW}x${o.cells.cellH}`},{trait_type:"Fold Count",value:n},{trait_type:"Max Folds",value:o.maxFolds},{trait_type:"Crease Count",value:o.creaseCount},{trait_type:"Palette Strategy",value:c},{trait_type:"Paper Type",value:i},{trait_type:"Paper Grain",value:o.paperProperties.angleAffinity!==null?"Grain":"Uniform"},...o.showCreaseLines?[{trait_type:"Crease Lines",value:"Visible"}]:[]]}}async function wo(t){if(!t)return!1;let e=document.createElement("style");e.textContent=`
    @font-face {
      font-family: '${te}';
      src: url('${t}');
    }
  `,document.head.appendChild(e);try{return await document.fonts.load(`12px ${te}`),await document.fonts.ready,!0}catch(n){return console.warn("Failed to load on-chain font:",n),!1}}function Io(t){if(typeof t=="number")return t;if(typeof t!="string")return 0;let e=t.replace(/^0x/,"").slice(0,16),n=BigInt("0x"+e);return Number(n%BigInt(2147483647))}var ae=null;function Ro(t,e,n){let{seed:r,foldCount:o,params:i}=t,{palette:s,cells:c,renderMode:l,showEmptyCells:u,multiColor:C,levelColors:M,foldStrategy:g,paperProperties:h}=i,{cellW:p,cellH:b}=c,{bg:f,text:d,accent:x}=s,y=e/1200,A=n/1697,I=1200-145*2,k=1697-145*2,v=gn(r,p,b,I,k),{cols:G,rows:W,strideX:H,strideY:P,gridOffsetX:L,gridOffsetY:F}=v,a=v.cellWidth,st=v.cellHeight,w=(145+L)*y,D=(145+F)*A,S=a*y,K=st*A,j=H*y,q=P*A,ct=We(r),Pt=pn(h,G,W),Bt=v.actualGridWidth,ye=v.actualGridHeight,{creases:Me,firstFoldTarget:Xt,lastFoldTarget:Yt}=Pe(Bt,ye,o,r,ct,g,Pt),$t=Me.map(z=>({...z,p1:{x:z.p1.x*y,y:z.p1.y*A},p2:{x:z.p2.x*y,y:z.p2.y*A}})),Et=null;if(Xt){let z=Math.max(0,Math.min(G-1,Math.floor(Xt.x/H))),ft=Math.max(0,Math.min(W-1,Math.floor(Xt.y/P)));Et=`${z},${ft}`}let B=null;if(Yt){let z=Math.max(0,Math.min(G-1,Math.floor(Yt.x/H))),ft=Math.max(0,Math.min(W-1,Math.floor(Yt.y/P)));B=`${z},${ft}`}let{cellWeights:Y,cellMaxGap:xt}=Mn($t,G,W,j,q,o,h),lt=new Set;if(Object.keys(xt).length>0){let z=Math.max(...Object.values(xt));for(let[ft,ut]of Object.entries(xt))ut===z&&lt.add(ft)}let Ct=1+ue+he,mt=K/Ct,wt=mt*_e,vt=[" ","\u2591","\u2592","\u2593"],Ot=mt<30?2:3,kt=xn(Y),It=(z,ft)=>C&&M&&M[z]?M[z]:d,be=mn(r,G,l),{cellOverflowAmount:$e,invertedSingleCharOnEmpty:Rt,getOverlapFactor:Tt,getCellDirection:je}=be,ne=145*y,jt=1055*y,bt=[];for(let z=0;z<W;z++){let ft=D+z*q;for(let ut=0;ut<G;ut++){let yt=w+ut*j,ot=`${ut},${z}`,et=Y[ot]||0,U=null,Q=d,N=-1,zt=!1;if(Et===ot?(N=et>0?Mt(et,kt):2,U=vt[Math.min(Math.max(N,2),Ot)],Q=x):l==="normal"?(N=Mt(et,kt),N===0?U=null:U=vt[Math.min(N,Ot)],Q=It(N,ot),lt.has(ot)&&et>0?Q=x:B===ot&&(Q=d)):l==="binary"?et===0?u&&(U=vt[1],zt=!0,Q=d):(N=Ot,U=vt[N],Q=It(N,ot),lt.has(ot)&&(Q=x)):l==="inverted"?(N=Math.min(3-Mt(et,kt),Ot),U=vt[N],Q=It(N,ot),lt.has(ot)&&et>0&&(Q=x)):l==="sparse"?(N=Mt(et,kt),N===1?(U=vt[1],Q=It(1,ot),lt.has(ot)&&(Q=x)):U=null):l==="dense"&&(N=Mt(et,kt),N>=2?(U=vt[Math.min(N,Ot)],Q=It(N,ot),lt.has(ot)&&(Q=x)):U=null),!U||U===" "||zt)continue;let Ce=yt+S,Ut=Math.min(Ce,jt)-yt;if(Ut<wt*.5)continue;let St=zt||et===0&&l!=="inverted",oe=l==="inverted"&&et===0&&Rt,ve=St||oe?1:Tt(z,ut),Kt=wt*ve,Vt=Math.max(1,Math.floor((Ut-wt)/Kt)+1),Ae=(Vt-1)*Kt+wt,Gt=(Ut-Ae)/wt,Ft=oe?1:Gt>.3?Vt+1:Vt,qt=U.repeat(Ft);bt.push({id:`char-${z}-${ut}`,char:qt,editChar:U,x:yt,y:ft,width:S,height:K,fontSize:mt,color:Q,row:z,col:ut,level:N,numChars:Ft,step:Kt,charWidth:wt,isAccent:lt.has(ot),isFoldTarget:Et===ot||B===ot})}}return{characters:bt,background:{color:f,textureColor:d,textureOpacity:.1},grid:{cols:G,rows:W,cellWidth:S,cellHeight:K,offsetX:w,offsetY:D}}}function To(t,e){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>t.apply(this,r),e)}}var m={charData:null,charElements:[],textBuffer:[],originalPositions:new Map,cursorIndex:-1,isEditing:!1,dragState:null,hiddenInput:null,container:null,bgCanvas:null,charLayer:null,loading:null,state:null,renderWidth:0,renderHeight:0,redrawCanvas:null},Qt=!1,ee=!1,ce=0,Ye=null,fe=null,So=`
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    overflow: hidden;
  }
  .fold-container {
    position: relative;
    width: min(100vw, calc(100vh * 1200 / 1697));
    height: min(100vh, calc(100vw * 1697 / 1200));
  }
  .fold-loading {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #fff;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: "Courier New", monospace;
    font-size: 24px;
    color: #000;
  }
  .fold-bg {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
  }
  .fold-chars {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    overflow: hidden;
  }
  .fold-char {
    position: absolute;
    cursor: default;
    user-select: none;
    font-family: "${te}", "Courier New", monospace;
    line-height: 1;
    white-space: pre;
  }
  .fold-char.dragging {
    cursor: grabbing;
    z-index: 1000;
    filter: brightness(1.2);
  }
  .fold-char.editing::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 2px;
    height: 60%;
    background: currentColor;
    animation: cursor-blink 1s step-end infinite;
  }
  @keyframes cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
`;function Go(){if(document.getElementById("fold-interactive-css"))return;let t=document.createElement("style");t.id="fold-interactive-css",t.textContent=So,document.head.appendChild(t)}function Fo(){let t=document.createElement("div");t.className="fold-container",t.id="fold-container",t.style.cssText="position:relative;width:min(100vw,calc(100vh*1200/1697));height:min(100vh,calc(100vw*1697/1200))";let e=document.createElement("div");e.className="fold-loading",e.id="fold-loading",e.textContent="\u2592",e.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;background:#fff;z-index:100;display:flex;align-items:center;justify-content:center;font-family:Courier New,monospace;font-size:24px;color:#000";let n=document.createElement("canvas");n.className="fold-bg",n.id="fold-bg";let r=document.createElement("div");return r.className="fold-chars",r.id="fold-chars",t.appendChild(e),t.appendChild(n),t.appendChild(r),document.body.appendChild(t),m.container=t,m.bgCanvas=n,m.charLayer=r,m.loading=e,{container:t,bgCanvas:n,charLayer:r,loading:e}}function Oo(t){let{isEditing:e,cursorIndex:n,textBuffer:r,hiddenInput:o,redrawCanvas:i}=m;if(!e||n<0)return;let s=t.data;if(!s)return;for(let u=0;u<s.length;u++){let C=n+u;if(C>=r.length)break;let M=r[C];M.char=s[u]}let c=Math.min(n+s.length,r.length-1),l=c!==n;l&&(m.cursorIndex=c),i&&i(l),Zt(),o.value=""}function ko(t){let{isEditing:e,cursorIndex:n,textBuffer:r,redrawCanvas:o}=m;if(e){if(t.key==="Escape"){me();return}if(t.key==="ArrowLeft")t.preventDefault(),n>0&&(m.cursorIndex=n-1,o&&o(!0),Zt());else if(t.key==="ArrowRight")t.preventDefault(),n<r.length-1&&(m.cursorIndex=n+1,o&&o(!0),Zt());else if(t.key==="Backspace"||t.key==="Delete"){t.preventDefault();let i=r[n];i.char!==i.originalChar&&i.char.trim()!==""?i.char=i.originalChar:i.char=" ",t.key==="Backspace"&&n>0&&(m.cursorIndex=n-1),o&&o(!0),Zt()}}}function Do(){setTimeout(()=>{m.hiddenInput&&!m.hiddenInput.matches(":focus")&&me()},100)}function Zt(){let{charElements:t,cursorIndex:e,hiddenInput:n,textBuffer:r}=m;if(t.forEach(o=>{o.classList.remove("editing"),o.style.color=""}),e>=0&&e<t.length){let o=r[e];o&&(o.el.style.color=o.color),t[e].classList.add("editing"),n&&(n.style.left=t[e].style.left,n.style.top=t[e].style.top)}}function Lo(t){m.isEditing=!0,m.cursorIndex=t,m.redrawCanvas&&m.redrawCanvas(!0),Zt(),m.hiddenInput&&m.hiddenInput.focus()}function me(){let{charElements:t,redrawCanvas:e}=m;m.isEditing=!1,m.cursorIndex=-1,t.forEach(n=>{n.classList.remove("editing","cursor"),n.style.color=""}),m.hiddenInput&&m.hiddenInput.blur(),e&&e(!1)}function No(t){t.addEventListener("mousedown",_o),t.addEventListener("touchstart",Wo,{passive:!1}),document.addEventListener("mousemove",Ho),document.addEventListener("touchmove",Po,{passive:!1}),document.addEventListener("mouseup",Bo),document.addEventListener("touchend",Xo),t.addEventListener("dblclick",Yo)}function _o(t){let e=t.target.closest(".fold-char");e&&(t.preventDefault(),Cn(e,t.clientX,t.clientY))}function Wo(t){let e=t.target.closest(".fold-char");if(!e)return;t.preventDefault();let n=t.touches[0];Cn(e,n.clientX,n.clientY)}function Cn(t,e,n){let r=t.getBoundingClientRect(),o=m.container.getBoundingClientRect();m.dragState={el:t,offsetX:e-r.left,offsetY:n-r.top,containerRect:o},t.classList.add("dragging")}function Ho(t){m.dragState&&vn(t.clientX,t.clientY)}function Po(t){if(!m.dragState)return;t.preventDefault();let e=t.touches[0];vn(e.clientX,e.clientY)}function vn(t,e){let{el:n,containerRect:r,offsetX:o,offsetY:i}=m.dragState,s=t-r.left-o,c=e-r.top-i;n.style.left=s+"px",n.style.top=c+"px"}function Bo(){An()}function Xo(){An()}function An(){m.dragState&&(m.dragState.el.classList.remove("dragging"),m.dragState=null)}function Yo(t){let e=t.target.closest(".fold-char");if(!e)return;t.preventDefault();let n=parseInt(e.dataset.index,10);isNaN(n)||Lo(n)}function $o(t){let{state:e,renderWidth:n,renderHeight:r,textBuffer:o,container:i}=m;if(!e||!i)return;let s=n,c=r,{params:l}=e,u=new Set;for(let h of o)h.char!==h.originalChar&&u.add(`${h.col},${h.row}`);let C=Be({folds:l.folds,seed:e.seed,outputWidth:s,outputHeight:c,bgColor:l.palette.bg,textColor:l.palette.text,accentColor:l.palette.accent,cellWidth:l.cells.cellW,cellHeight:l.cells.cellH,renderMode:l.renderMode,showEmptyCells:l.showEmptyCells,multiColor:l.multiColor,levelColors:l.levelColors,foldStrategy:l.foldStrategy,paperProperties:l.paperProperties,showCreaseLines:l.showCreaseLines,analyticsMode:l.analyticsMode,skipCells:u.size>0?u:null}),M=C.canvas.getContext("2d"),g=C.canvas.width/s;for(let h of o)if(h.char!==h.originalChar&&h.char.trim()!==""){let p=h.fontSize*g;M.font=`${p}px ${xe}`,M.fillStyle=h.color,M.textAlign="center",M.textBaseline="middle";let b=(h.x+h.width/2)*g,f=(h.y+h.height/2)*g;M.fillText(h.char,b,f)}C.canvas.toBlob(h=>{let p=URL.createObjectURL(h),b=document.createElement("a");b.href=p,b.download=`fold-${t||"edit"}.png`,b.click(),URL.revokeObjectURL(p)},"image/png")}function jo(){me();let{charElements:t,textBuffer:e,originalPositions:n,redrawCanvas:r,offsetX:o=0,offsetY:i=0}=m;for(let s=0;s<t.length;s++){let c=t[s],l=n.get(s);l&&(c.style.left=l.x+o+"px",c.style.top=l.y+i+"px",e[s]&&(e[s].char=l.editChar,e[s].x=l.x,e[s].y=l.y))}r&&r(!1)}function ge(){ee=!1,Ye=null,fe&&(clearTimeout(fe),fe=null)}function En(){let{redrawCanvas:t,state:e}=m;if(!ee||!e||!t){ge();return}if(ce>e.foldCount){ge(),t({foldOverride:e.foldCount,showOverlays:!1});return}let n=Ye==="lines-only";t({foldOverride:ce,showOverlays:n,linesOnly:n}),ce++,fe=setTimeout(En,50)}function ln(t){ge(),ee=!0,ce=0,Ye=t,En()}function zo(t){document.addEventListener("keydown",e=>{if((e.metaKey||e.ctrlKey)&&e.key==="s"){e.preventDefault(),$o(t);return}if(!m.isEditing){if(e.key==="Escape"){e.preventDefault(),ee?(ge(),m.redrawCanvas&&m.redrawCanvas({showOverlays:Qt})):jo();return}if(e.shiftKey&&e.key==="F"){e.preventDefault(),Qt=!Qt,!ee&&m.redrawCanvas&&m.redrawCanvas({showOverlays:Qt});return}if(e.shiftKey&&e.key==="A"){e.preventDefault(),ln("full");return}if(e.shiftKey&&e.key==="L"){e.preventDefault(),ln("lines-only");return}}})}function an(t,e,n){let{bgCanvas:r,charLayer:o}=m,{seed:i,params:s}=t,c=1200/1697,l,u;e/n>c?(u=n,l=Math.floor(u*c)):(l=e,u=Math.floor(l/c)),m.state=t,m.renderWidth=l,m.renderHeight=u,m.containerWidth=e,m.containerHeight=n;let C=(p=!1)=>{let b=typeof p=="object"?p:{skipEditingCell:p},{skipEditingCell:f=!1,foldOverride:d,showOverlays:x=Qt,linesOnly:y=!1}=b,A=new Set;for(let L=0;L<m.textBuffer.length;L++){let F=m.textBuffer[L];(f&&L===m.cursorIndex||F.char!==F.originalChar)&&A.add(`${F.col},${F.row}`)}let I=2,k=d!==void 0?d:s.folds;r.width=e*I,r.height=n*I,r.style.width=e+"px",r.style.height=n+"px";let v=r.getContext("2d");v.setTransform(I,0,0,I,0,0),v.fillStyle=s.palette.bg,v.fillRect(0,0,e,n);let G=l/1200;bn(v,e,n,G,s.palette.text);let W=Be({folds:k,seed:i,outputWidth:l,outputHeight:u,bgColor:s.palette.bg,textColor:s.palette.text,accentColor:s.palette.accent,cellWidth:s.cells.cellW,cellHeight:s.cells.cellH,renderMode:s.renderMode,showEmptyCells:s.showEmptyCells,multiColor:s.multiColor,levelColors:s.levelColors,foldStrategy:s.foldStrategy,paperProperties:s.paperProperties,showCreaseLines:s.showCreaseLines,analyticsMode:s.analyticsMode,skipCells:A.size>0?A:null,skipBackground:!0,showCreases:x,showIntersections:x,linesOnlyMode:y}),H=(e-l)/2,P=(n-u)/2;v.drawImage(W.canvas,0,0,W.canvas.width,W.canvas.height,H,P,l,u);for(let L=0;L<m.textBuffer.length;L++){let F=m.textBuffer[L];if(!(f&&L===m.cursorIndex)&&F.char!==F.originalChar&&F.char.trim()!==""){v.font=`${F.fontSize}px ${xe}`,v.fillStyle=F.color,v.textAlign="center",v.textBaseline="middle";let st=H+F.x+F.width/2,w=P+F.y+F.height/2;v.fillText(F.char,st,w),v.textAlign="left",v.textBaseline="top"}}};m.redrawCanvas=C,C(!1);let M=(e-l)/2,g=(n-u)/2;m.offsetX=M,m.offsetY=g;let h=Ro(t,l,u);m.charData=h,Uo(o,h.characters)}function Uo(t,e){me(),t.innerHTML="",m.charElements=[],m.originalPositions.clear(),m.textBuffer=[],m.hiddenInput=null;let n=m.offsetX||0,r=m.offsetY||0;for(let i=0;i<e.length;i++){let s=e[i],c=document.createElement("div");c.className="fold-char",c.dataset.index=i,c.style.cssText=`
      position: absolute;
      left: ${s.x+n}px;
      top: ${s.y+r}px;
      width: ${s.width}px;
      height: ${s.height}px;
      user-select: none;
      background: transparent;
    `;let l=s.editChar||s.char.charAt(0),u=s.numChars||s.char.length;m.originalPositions.set(i,{x:s.x,y:s.y,char:s.char,editChar:l,numChars:u}),m.textBuffer.push({char:l,originalChar:l,displayChar:s.char,numChars:u,el:c,color:s.color,fontSize:s.fontSize,x:s.x,y:s.y,width:s.width,height:s.height,row:s.row,col:s.col,step:s.step,charWidth:s.charWidth}),t.appendChild(c),m.charElements.push(c)}let o=document.createElement("input");o.type="text",o.style.cssText="position:absolute;opacity:0;pointer-events:none;width:1px;height:1px;",o.addEventListener("input",Oo),o.addEventListener("keydown",ko),o.addEventListener("blur",Do),t.appendChild(o),m.hiddenInput=o}async function Ne(){let t=typeof window<"u"&&window.SEED,e=typeof window<"u"&&window.FOLD_COUNT,n=typeof window<"u"&&window.LESS_SEED;if(n&&!t&&(t=Io(n)),t&&e===void 0){let o=_(t+9999);e=Math.floor(1+o()*500)}let r=typeof window<"u"&&window.FONT_DATA_URI||cn;if(t&&e!==void 0){await wo(r),Go(),Fo();let o=Xe(t,1200,1697,0,e);ae={seed:t,foldCount:e,params:o};let s=m.container.getBoundingClientRect();an(ae,s.width,s.height),m.loading&&(m.loading.style.display="none"),No(m.charLayer),zo(t),typeof window<"u"&&(window.RENDER_COMPLETE=!0),window.addEventListener("resize",To(()=>{if(ae){let c=m.container.getBoundingClientRect();an(ae,c.width,c.height)}},150))}}typeof window<"u"&&(window.SEED||window.FOLD_COUNT!==void 0||window.LESS_SEED)&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Ne()):Ne());})();
</script></body></html>
(()=>{var Qt="FoldMono",De="data:font/woff2;charset=utf-8;base64,d09GMgABAAAAAAOIAA4AAAAADAQAAAM2AAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhYbEBwmBmAAPBEQCo9sjiABNgIkAwwLDAAEIAWCfAcgGzkKIK4GbGOy2GicLj5u8RpRKYyZuIy26Oe9GkG0llXPQhAUoVLRQOiIjYYnUuLluRfqlUh8nv35d3DbeacPRpI7wLzuWl2XGTr+R4rdqk48ecPEg8A0wvynUz9VJ0gGYLd1C/5xl7xv3SZnBWzBGr8QtP8P9KU3gF/4v///XtV/LeBjv+MBmzYJYqG96Ce0h6/5XmbHBNnLAlygYMFqXKAK1bYRcgkLxgZhXaf627YE6gFJIBcCteo1AuwbDBChbA4tEHHa8CDi2utCBABSXokNorp4phkhurc/Cdkmqp0bWqrKalIqUp4jaAbAzD4U5MOrPfX1JpR/yDVAQLZF3YE+VCRkaEcRaEc1Bkq5kJLE/gHUNnm3+zdMKK9aMhR+h189BajFT9I/lJ0BIAcwLMQ2l3Yj73wvYnyWbjmo3XbjJ0eY8W5h/BrjMzLJ2VlnUo3PYuKqtuQN3OLm3X+/upK1DTdwjZsDyUyqec6GEF09syI3F92yUZdMJ62DE7XK6uCueMYse9occDNSOJk2TzuvAA1ohsS27Vw8Tqt1nSmHabjbFnGndFO5K3PzpJ4CUz1JBorMmHHLdmQwBHRTnMkKhQ2QvVOwlGW8DcP5FqbrJJvdjsuaDB97D7UPuQfMWVxWiURGZPMptIkVhKEJKCNQDIyTFKlyZLbV+p53gX4egWr7bX73rYYTy+fRt6NAzImHc31/acg9fC0EFH1/obMyd7VtOx4JfU3acYK4OL1wfhzUFbtqf+2dJ+YG3K/voIAkorej7to5G4ZgZG5J17dlDgasZyO9xT2bOM2geuh5N335H/05CBAo+D8a3teHrs9kVYNvlTICfznXj/qG+mEqQY0AQfnnlyCvvGfUD0jWq5FXOCj0rhgQshT513IJVZZQRF6DIzii0KmJkkZPKLNkNZ7LUKHHe3ulrkb3x2Kgo2PDk1VXwRPT09UzttAnIRgd6m8KBWMNkbgGj19b25mmG2vqxkaEs7LdVDE0VVGmSeKcTHfjguaJm3smpWsmdnzBsDSJIzDqMKW8o1bEecw0dHS0TGzyS4Z6n9NTNSaXDzlPw2BeyPLakJQRk0Wx9HurZUEAAA==",yn='"Courier New", Courier, monospace',Ne=`"${Qt}", ${yn}`,ke=.6,ue=.08,de=.06,Mn=.03,bn=.05;function An(t,e,n){let s=t/255,o=e/255,r=n/255;return(.2126*s+.7152*o+.0722*r)*100}var W=[{hex:"#000000",name:"black",luminance:0,temperature:"neutral",r:0,g:0,b:0},{hex:"#0000AA",name:"blue",luminance:10,temperature:"cool",r:0,g:0,b:170},{hex:"#AA0000",name:"red",luminance:20,temperature:"warm",r:170,g:0,b:0},{hex:"#AA00AA",name:"magenta",luminance:25,temperature:"warm",r:170,g:0,b:170},{hex:"#FFFFFF",name:"white",luminance:100,temperature:"neutral",r:255,g:255,b:255},{hex:"#FFFF55",name:"yellow",luminance:93,temperature:"warm",r:255,g:255,b:85},{hex:"#55FFFF",name:"lightCyan",luminance:85,temperature:"cool",r:85,g:255,b:255},{hex:"#55FF55",name:"lightGreen",luminance:77,temperature:"cool",r:85,g:255,b:85},{hex:"#00AA00",name:"green",luminance:30,temperature:"cool",r:0,g:170,b:0},{hex:"#00AAAA",name:"cyan",luminance:40,temperature:"cool",r:0,g:170,b:170},{hex:"#5555FF",name:"lightBlue",luminance:45,temperature:"cool",r:85,g:85,b:255},{hex:"#FF5555",name:"lightRed",luminance:45,temperature:"warm",r:255,g:85,b:85},{hex:"#FF55FF",name:"lightMagenta",luminance:60,temperature:"warm",r:255,g:85,b:255}],wn=W.filter(t=>t.luminance<30||t.luminance>70),Cn={black:.2,white:.15,blue:.15,red:.15,magenta:.1,yellow:.1,lightCyan:.08,lightGreen:.07},Ft=W,En=W.filter(t=>t.temperature!=="neutral"),Rn=W.filter(t=>t.temperature!=="neutral"),Ge=W,po={dark:W.filter(t=>t.luminance<30),light:W.filter(t=>t.luminance>70)},Se={warm:W.filter(t=>t.temperature==="warm"),cool:W.filter(t=>t.temperature==="cool"),neutral:W.filter(t=>t.temperature==="neutral")};function In(t,e,n){let s=t.luminance,o=e.luminance,r=[];for(let i=0;i<n;i++){let m=i/(n-1),u=s+(o-s)*m,a=W.filter(A=>A.temperature===t.temperature||A.temperature==="neutral"),f=a[0],g=Math.abs(f.luminance-u);for(let A of a){let p=Math.abs(A.luminance-u);p<g&&(g=p,f=A)}r.push(f)}return r}function Dt(t,e,n=4.5){let s=t.luminance/100,o=e.luminance/100,r=Math.max(s,o)+.05,i=Math.min(s,o)+.05;return r/i>=n}function xt(t,e){return e[Math.floor(t()*e.length)]}function Tn(t,e,n){let s=t(),o=0;for(let r of e)if(o+=n[r.name]||0,s<o)return r;return e[e.length-1]}function zt(t,e,n){e/=100,n/=100;let s=e*Math.min(n,1-n),o=r=>{let i=(r+t/30)%12,m=n-s*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*m).toString(16).padStart(2,"0")};return`#${o(0)}${o(8)}${o(4)}`}function Nt(t){let e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,s=parseInt(t.slice(5,7),16)/255,o=Math.max(e,n,s),r=Math.min(e,n,s),i,m,u=(o+r)/2;if(o===r)i=m=0;else{let a=o-r;switch(m=u>.5?a/(2-o-r):a/(o+r),o){case e:i=((n-s)/a+(n<s?6:0))/6;break;case n:i=((s-e)/a+2)/6;break;case s:i=((e-n)/a+4)/6;break}}return{h:i*360,s:m*100,l:u*100}}var Fn={red:["cyan","lightCyan"],magenta:["green","lightGreen"],blue:["yellow"],lightRed:["cyan","lightCyan"],lightMagenta:["green","lightGreen"],lightBlue:["yellow"],cyan:["red","lightRed"],lightCyan:["red","lightRed"],green:["magenta","lightMagenta"],lightGreen:["magenta","lightMagenta"],yellow:["blue","lightBlue"],black:["white","yellow","lightCyan"],white:["black","blue","magenta"]};function On(t,e,n){let o=[];switch(e){case"value":{let r=t.luminance<50;o=Ft.filter(i=>r?i.luminance>60:i.luminance<40);break}case"temperature":{if(t.temperature==="neutral")o=Ft.filter(r=>r.temperature!=="neutral"&&Math.abs(r.luminance-t.luminance)>25);else{let r=t.temperature==="warm"?"cool":"warm";o=Ft.filter(i=>i.temperature===r&&Math.abs(i.luminance-t.luminance)>25)}break}case"complement":{let r=Fn[t.name]||[];if(o=Ft.filter(i=>r.includes(i.name)),o.length===0){let i=t.luminance<50;o=Ft.filter(m=>i?m.luminance>60:m.luminance<40)}break}case"clash":{o=Ft.filter(r=>r.name!==t.name&&Math.abs(r.luminance-t.luminance)>20&&Math.abs(r.luminance-t.luminance)<50);break}}return o.sort((r,i)=>Math.abs(i.luminance-t.luminance)-Math.abs(r.luminance-t.luminance)),o.length>0?xt(n,o):t.luminance<50?W.find(r=>r.name==="white"):W.find(r=>r.name==="black")}function vn(t,e,n){if(n()<.4)return e;let s=En.filter(r=>r.name!==t.name&&r.name!==e.name&&Math.abs(r.luminance-t.luminance)>20);if(s.length===0)return e;let o=s.filter(r=>["yellow","lightCyan","lightMagenta","lightGreen"].includes(r.name));return o.length>0&&n()<.6?xt(n,o):xt(n,s)}function Gn(t){let e=xt(t,Rn),n;return e.luminance>50?n=W.find(s=>s.name==="black"):e.luminance<30?n=t()<.75?W.find(s=>s.name==="black"):W.find(s=>s.name==="white"):n=t()<.6?W.find(s=>s.name==="black"):W.find(s=>s.name==="white"),{bg:n.hex,text:e.hex,accent:e.hex,strategy:`monochrome/${e.name}`,colorCount:2}}function Sn(t){let e=T(t);if(e()<.12)return Gn(e);let n=Tn(e,wn,Cn),s=e(),o;s<.4?o="value":s<.68?o="temperature":s<.9?o="complement":o="clash";let r=On(n,o,e),i=vn(n,r,e);return Math.abs(n.luminance-r.luminance)<25?{bg:n.luminance<50?"#000000":"#FFFFFF",text:n.luminance<50?"#FFFFFF":"#000000",accent:"#FFFF55",strategy:"fallback",colorCount:3}:{bg:n.hex,text:r.hex,accent:i.hex,strategy:o,colorCount:i.hex===r.hex?2:3}}function _e(t,e,n){let s=[];for(let o=e;o<=n;o++)t%o===0&&s.push(o);return s}function _n(t,e,n,s){let o=1200-n*2-100,r=1500-n*2-50*2,i=_e(o,20,600),m=_e(r,20,600);i.length===0&&i.push(8),m.length===0&&m.push(12);let u=T(s+9999),a=1+ue+de,f=ke/a,g=[];for(let c of i)for(let M of m){let y=Math.max(c/M,M/c),d=M*f;y<=3&&c>=d&&g.push({w:c,h:M})}if(g.length===0)return{cellW:8,cellH:12};g.sort((c,M)=>c.w*c.h-M.w*M.h);let A=u(),p;if(A<.03){let c=Math.max(1,Math.ceil(g.length*.1)),M=Math.floor(u()*c);p=g[M]}else if(A<.1){let c=Math.floor(g.length*.1),M=Math.floor(g.length*.25),y=c+Math.floor(u()*Math.max(1,M-c));p=g[Math.min(y,g.length-1)]}else if(A<.45){let c=Math.floor(g.length*.25),M=Math.floor(g.length*.75),y=c+Math.floor(u()*(M-c));p=g[Math.min(y,g.length-1)]}else if(A<.95){let c=Math.floor(g.length*.75),M=Math.floor(g.length*.9),y=c+Math.floor(u()*Math.max(1,M-c));p=g[Math.min(y,g.length-1)]}else{let c=Math.floor(g.length*.9),M=c+Math.floor(u()*(g.length-c));p=g[Math.min(M,g.length-1)]}return{cellW:p.w,cellH:p.h}}function Ln(t){let n=T(t+5555)();return n<.35?"normal":n<.4?"binary":n<.65?"inverted":n<.825?"sparse":"dense"}function xe(t){let e=T(t+7777),n=e();if(n<.25){let s=.2+e()*.2;return{min:s,max:s+.1+e()*.2}}else if(n<.5){let s=.6+e()*.2;return{min:s,max:s+.1+e()*.1}}else return n<.75?{min:.1+e()*.2,max:.7+e()*.3}:{min:.3+e()*.2,max:.5+e()*.5}}function Dn(t){let e=T(t+11111);if(!(e()>=.5))return{hasOverlap:!1,amount:"none"};let s=e(),o;return s<.2?o="5%":s<.4?o="25%":s<.6?o="50%":s<.8?o="75%":o="95%",{hasOverlap:!0,amount:o}}function We(t){let e=T(t+2222);return Math.floor(4+e()*66)}function He(t){let e=T(t+6666),n=e();return n<.16?{type:"horizontal",jitter:3+e()*12}:n<.32?{type:"vertical",jitter:3+e()*12}:n<.44?{type:"diagonal",angle:e()<.5?45:135,jitter:5+e()*15}:n<.56?{type:"radial",focalX:.2+e()*.6,focalY:.2+e()*.6}:n<.68?{type:"grid",jitter:3+e()*10}:n<.8?{type:"clustered",clusterX:.15+e()*.7,clusterY:.15+e()*.7,spread:.2+e()*.4}:{type:"random"}}function ce(t){let e=t.toUpperCase();return Ge.find(n=>n.hex===e)||Ge[0]}function Nn(t,e,n){let s=T(t+3333),o=ce(e),r=ce(n),i=o.luminance>50,m=s();if(m<.45){if(o.cubePos&&r.cubePos){let a=getCubeDiagonalPath(o,r,6);if(a.length>=4)return[a[0].hex,a[Math.floor(a.length*.33)].hex,a[Math.floor(a.length*.66)].hex,a[a.length-1].hex]}let u=In(o,r,6);return[u[0].hex,u[Math.floor(u.length*.33)].hex,u[Math.floor(u.length*.66)].hex,u[u.length-1].hex]}else if(m<.75){let u=getCubeNeighbors(r,1),a=getCubeNeighbors(r,2),f=getCubeNeighbors(r,3),g=(d,w)=>i?w.luminance-d.luminance:d.luminance-w.luminance,A=u.filter(d=>Dt(o,d,2)).sort(g),p=a.filter(d=>Dt(o,d,3)).sort(g),c=f.filter(d=>Dt(o,d,4)).sort(g),M=[r.hex];if(A.length>0?M.push(xt(s,A).hex):M.push(r.hex),p.length>0){let d=p.filter(w=>!M.includes(w.hex));M.push(d.length>0?xt(s,d).hex:p[0].hex)}else M.push(M[1]);if(c.length>0){let d=c.filter(w=>!M.includes(w.hex));M.push(d.length>0?xt(s,d).hex:c[0].hex)}else M.push(r.hex);let y=M.map(d=>ce(d));return y.sort((d,w)=>i?w.luminance-d.luminance:d.luminance-w.luminance),y.map(d=>d.hex)}else{let u=r.temperature,a=u==="warm"?"cool":"warm",f=Se[u].filter(d=>Dt(o,d,2.5)),g=Se[a].filter(d=>Dt(o,d,2.5)),A=(d,w)=>i?w.luminance-d.luminance:d.luminance-w.luminance;f.sort(A),g.sort(A);let p=[];p.push(f.length>0?f[0].hex:r.hex);let c=f.filter(d=>!p.includes(d.hex));p.push(c.length>0?c[Math.floor(c.length*.3)].hex:r.hex);let M=g.filter(d=>!p.includes(d.hex));p.push(M.length>0?M[Math.floor(M.length*.5)].hex:r.hex);let y=[...f,...g].filter(d=>!p.includes(d.hex));return y.sort(A),p.push(y.length>0?y[y.length-1].hex:r.hex),p}}function kn(t){return T(t+4444)()<.25}function Wn(t){return T(t+9191)()<.008}function Hn(t){let e=T(t+5555),n=.1+e()*.8,s=0,o=e()<.4,r=o?e()*180:null,i=o?.2+e()*.6:0,m=.3+e()*1.4;return{absorbency:n,intersectionThreshold:s,angleAffinity:r,affinityStrength:i,ceilingMultiplier:m}}function Pn(t){let e=t.absorbency<.35?"Resistant":t.absorbency<.65?"Standard":"Absorbent",n=t.intersectionThreshold<.15?"Fine":t.intersectionThreshold<.35?"Medium":"Coarse",s=t.angleAffinity!==null?"Grain":"Uniform";return`${e}/${n}/${s}`}function Bn(t,e,n){return t}var fe=[-1/2,-1/4,-1/8,-1/16,1/64,1/32,1/16,1/8,1/4,1/2,1,2];function jn(t,e,n,s,o){let r=T(t+12345),i=r()<.4,m=!1,u=!1;if(i){let C=r();C<.33?m=!0:(C<.66||(m=!0),u=!0)}let a=()=>{let C=fe.slice(4,11);return r()<.25&&C.push(fe[11]),r()<.2&&C.push(...fe.slice(0,4)),C},f=e,g=n,A=1,p=0,c=1/0,M=m?a():[0];for(let C of M){let I=f*C,et=f+I;if(et<=0)continue;let B=Math.max(1,Math.floor((s+I)/et));if(B===1){let F=Math.min(f,s),E=Math.abs(s-F);E<c&&(c=E,A=1,p=0,f=F)}else{let F=B*f+(B-1)*I;if(F<=s){let E=Math.abs(s-F);E<c&&(c=E,A=B,p=I)}}}A===1&&f<s&&(f=s,p=0);let y=1,d=0,w=1/0,D=u?a():[0];for(let C of D){let I=g*C,et=g+I;if(et<=0)continue;let B=Math.max(1,Math.floor((o+I)/et));if(B===1){let F=Math.min(g,o),E=Math.abs(o-F);E<w&&(w=E,y=1,d=0,g=F)}else{let F=B*g+(B-1)*I;if(F<=o){let E=Math.abs(o-F);E<w&&(w=E,y=B,d=I)}}}y===1&&g<o&&(g=o,d=0);let it=A,q=y,Q=p,N=d,ct=it*f+(it>1?(it-1)*Q:0),rt=q*g+(q>1?(q-1)*N:0),l=s-ct,tt=o-rt;return{cols:it,rows:q,cellWidth:f,cellHeight:g,colGap:Q,rowGap:N,strideX:f+Q,strideY:g+N,gridOffsetX:l>0?l/2:0,gridOffsetY:tt>0?tt/2:0,actualGridWidth:ct,actualGridHeight:rt}}function Xn(t){let e=Object.values(t).filter(m=>m>0);if(e.length===0)return{t1:1,t2:2,t3:3,tExtreme:999};e.sort((m,u)=>m-u);let n=(m,u)=>{let a=Math.floor(m.length*u);return m[Math.min(a,m.length-1)]},s=n(e,.7),o=n(e,.94),r=n(e,.94)+1,i=n(e,.985);return{t1:Math.max(.01,s),t2:Math.max(s+.01,o),t3:Math.max(o+.01,r),tExtreme:Math.max(r+.01,i)}}function Ot(t,e){return t===0?0:t<=e.t1?1:t<=e.t2?2:3}function T(t){let e=Math.abs(t)||1;return()=>(e=e*1103515245+12345&2147483647,e/2147483647)}var X={add:(t,e)=>({x:t.x+e.x,y:t.y+e.y}),sub:(t,e)=>({x:t.x-e.x,y:t.y-e.y}),scale:(t,e)=>({x:t.x*e,y:t.y*e}),dot:(t,e)=>t.x*e.x+t.y*e.y,len:t=>Math.sqrt(t.x*t.x+t.y*t.y),dist:(t,e)=>X.len(X.sub(t,e)),norm:t=>{let e=X.len(t);return e>1e-4?X.scale(t,1/e):{x:0,y:0}},perp:t=>({x:-t.y,y:t.x}),mid:(t,e)=>({x:(t.x+e.x)/2,y:(t.y+e.y)/2}),lerp:(t,e,n)=>({x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}),copy:t=>({x:t.x,y:t.y}),eq:(t,e)=>X.dist(t,e)<.5};function ye(t,e,n,s){let o=X.sub(e,t),r=X.sub(s,n),i=o.x*r.y-o.y*r.x;if(Math.abs(i)<1e-4)return null;let m=X.sub(n,t),u=(m.x*r.y-m.y*r.x)/i,a=(m.x*o.y-m.y*o.x)/i;return u>=.001&&u<=.999&&a>=.001&&a<=.999?{point:X.add(t,X.scale(o,u)),t:u,u:a}:null}function Yn(t,e){let n=t.reduce((o,r)=>o+r,0);if(n<=0)return 0;let s=e()*n;for(let o=0;o<t.length;o++)if(s-=t[o],s<=0)return o;return t.length-1}var $n=0,Un=1,Kn=2,zn=3;function at(t,e,n,s){switch(t){case $n:return{x:e*n,y:0};case Un:return{x:n,y:e*s};case Kn:return{x:(1-e)*n,y:s};case zn:return{x:0,y:(1-e)*s};default:return{x:e*n,y:0}}}function Pe(t,e,n){switch(t){case 0:return{x:0,y:0};case 1:return{x:e,y:0};case 2:return{x:e,y:n};case 3:return{x:0,y:n};default:return{x:0,y:0}}}function Be(t,e){return{x:t.p1.x+(t.p2.x-t.p1.x)*e,y:t.p1.y+(t.p2.y-t.p1.y)*e}}function pe(t,e){let n=e.x-t.x,s=e.y-t.y,o=Math.atan2(s,n)*180/Math.PI;return o<0&&(o+=180),o>=180&&(o-=180),o}function Vn(t,e,n,s,o,r){let i=Math.max(.2,1-t*.015);if(r()<i||e.length===0&&n.length===0)if(r()<.15){let a=Math.floor(r()*4);return{point:Pe(a,s,o),type:"corner",corner:a}}else{let a=Math.floor(r()*4),f=.05+r()*.9;return{point:at(a,f,s,o),type:"edge",edge:a,t:f}}else if(n.length>0&&r()<.35){let a=n[Math.floor(r()*n.length)];return{point:{x:a.x,y:a.y},type:"intersection",intersectionIndex:n.indexOf(a)}}else if(e.length>0){let a=e[Math.floor(r()*e.length)],f=.1+r()*.8;return{point:Be(a,f),type:"crease",creaseIndex:e.indexOf(a),t:f}}else{let a=Math.floor(r()*4),f=.05+r()*.9;return{point:at(a,f,s,o),type:"edge",edge:a,t:f}}}function Jn(t,e,n,s,o,r,i,m){let u=Math.min(o,r)*.15,a=[];if(t.type==="edge"){let p=(t.edge+2)%4,c=(t.edge+1)%4,M=(t.edge+3)%4,y=e<3?3:1.5;for(let w=0;w<3;w++){let D=.1+i()*.8;a.push({point:at(p,D,o,r),type:"edge",edge:p,weight:y})}let d=1;for(let w=0;w<2;w++){let D=.1+i()*.8;a.push({point:at(c,D,o,r),type:"edge",edge:c,weight:d}),a.push({point:at(M,D,o,r),type:"edge",edge:M,weight:d})}}else if(t.type==="corner"){let p=(t.corner+2)%4;a.push({point:Pe(p,o,r),type:"corner",weight:2});for(let c=0;c<4;c++)if(!(c===t.corner||c===(t.corner+3)%4)){let y=.2+i()*.6;a.push({point:at(c,y,o,r),type:"edge",edge:c,weight:1.5})}}else{for(let p=0;p<4;p++){let c=.1+i()*.8;a.push({point:at(p,c,o,r),type:"edge",edge:p,weight:1})}if(n.length>1&&e>3)for(let p=0;p<Math.min(3,n.length);p++){let c=Math.floor(i()*n.length),M=n[c];if(t.type==="crease"&&t.creaseIndex===c)continue;let y=.15+i()*.7;a.push({point:Be(M,y),type:"crease",creaseIndex:c,weight:.6})}}if(n.length>0&&m)for(let p of a){let c=pe(t.point,p.point);for(let M of n){let y=pe(M.p1,M.p2),d=Math.abs(c-y);d>90&&(d=180-d),m.parallel>0&&d<15&&(p.weight*=1+m.parallel),m.perpendicular>0&&d>75&&(p.weight*=1+m.perpendicular)}}let f=a.filter(p=>X.dist(t.point,p.point)>=u);if(f.length===0){for(let c=0;c<4;c++){let y=at(c,.5,o,r);if(X.dist(t.point,y)>=u)return{point:y,type:"edge",edge:c}}let p=t.type==="edge"?(t.edge+2)%4:0;return{point:at(p,.5,o,r),type:"edge",edge:p}}let g=f.map(p=>p.weight),A=Yn(g,i);return f[A]}function qn(t){let e=[];for(let n=0;n<t.length;n++)for(let s=n+1;s<t.length;s++){let o=ye(t[n].p1,t[n].p2,t[s].p1,t[s].p2);o&&e.push({x:o.point.x,y:o.point.y,crease1:n,crease2:s})}return e}function je(t,e,n,s,o={min:0,max:1},r=null,i=null){if(!t||!e||t<=0||e<=0)return{creases:[],finalShape:[]};let m=r||He(s),u=We(s),a=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}],f=[],g=null,A=null;if(!n||n<=0)return{creases:[],finalShape:a,maxFolds:u,firstFoldTarget:null,lastFoldTarget:null};let p=T(s),c=T(s+8888),M=T(s+6666),y=i||{absorbency:1,intersectionThreshold:0,angleAffinity:null,affinityStrength:0,ceilingMultiplier:1},d=[],w=T(s+1111);for(let N=0;N<u;N++)d[N]=.001+w()*.25;let D=T(s+2222),it={parallel:D()*.8,perpendicular:D()*.8},q=Math.max(t,e)*.05,Q=[];for(let N=0;N<n;N++){let ct=N%u,rt=Math.floor(N/u);if(ct===0&&rt>0)for(let z of f)z.reductionMultiplier!==void 0&&(z.weight=Math.max(.01,z.weight*z.reductionMultiplier));N%5===0&&f.length>1&&(Q=qn(f));let l=Vn(N,f,Q,t,e,p),tt=Jn(l,N,f,Q,t,e,p,it),C=l.point,I=tt.point,B=M()<y.absorbency,F=o.min+c()*(o.max-o.min);if(y.angleAffinity!==null&&y.affinityStrength>0){let z=pe(C,I),Y=Math.abs(z-y.angleAffinity);Y>90&&(Y=180-Y);let ft=1-Y/90*y.affinityStrength;F*=ft}if(B&&F>.01&&(f.push({p1:X.copy(C),p2:X.copy(I),depth:f.length,weight:F,cyclePosition:ct,reductionMultiplier:d[ct],anchorType:l.type,terminusType:tt.type}),f.length>1)){let z=f[f.length-1];for(let Y=0;Y<f.length-1;Y++){let ft=ye(z.p1,z.p2,f[Y].p1,f[Y].p2);ft&&Q.push({x:ft.point.x,y:ft.point.y,crease1:Y,crease2:f.length-1})}}let E=X.mid(C,I),K={x:Math.max(q,Math.min(t-q,E.x)),y:Math.max(q,Math.min(e-q,E.y))};N===0&&g===null&&(g=K),A=K}return{creases:f,finalShape:a,maxFolds:u,firstFoldTarget:g,lastFoldTarget:A}}function Qn(t){let e=[];for(let n=0;n<t.length;n++)for(let s=n+1;s<t.length;s++){let o=ye(t[n].p1,t[n].p2,t[s].p1,t[s].p2);if(o){let r=t[n].weight||1,i=t[s].weight||1;e.push({x:o.point.x,y:o.point.y,depth1:t[n].depth,depth2:t[s].depth,gap:Math.abs(t[s].depth-t[n].depth),weight:r+i})}}return e}function Zn(t,e,n,s,o,r=null,i=null){let m=Qn(t),u=i||{intersectionThreshold:0,ceilingMultiplier:1},a=m.filter(y=>y.weight>=u.intersectionThreshold),f={},g={},A={};for(let y of a){let d=Math.floor(y.x/s),w=Math.floor(y.y/o);if(d>=0&&d<e&&w>=0&&w<n){let D=`${d},${w}`;f[D]=(f[D]||0)+y.weight,g[D]=Math.max(g[D]||0,y.gap),A[D]=(A[D]||0)+1}}let c=e*n*.5*u.ceilingMultiplier,M=Object.values(f).reduce((y,d)=>y+d,0);if(M>c&&M>0){let y=c/M,d=y+(1-y)*.3;for(let w of Object.keys(f))f[w]*=d}return{activeCreases:t,intersections:a,cellWeights:f,cellMaxGap:g,cellIntersectionCounts:A,destroyed:0,maxFolds:r}}function Xe({folds:t,seed:e,outputWidth:n,outputHeight:s,bgColor:o,textColor:r,accentColor:i,cellWidth:m,cellHeight:u,renderMode:a,multiColor:f,levelColors:g,foldStrategy:A=null,paperProperties:p=null,padding:c=0,showCreases:M=!1,showPaperShape:y=!1,showFoldTargets:d=!1,showIntersections:w=!1,showGrid:D=!1,showHitCounts:it=!1,showCellOutlines:q=!1,showCreaseLines:Q=!1,fontFamily:N=Ne,linesOnlyMode:ct=!1}){fetch("http://127.0.0.1:7242/ingest/74d4f25e-0fce-432d-aa79-8bfa524124c4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"fold-core.js:2378",message:"renderToCanvas entry",data:{outputWidth:n,outputHeight:s,padding:c,DRAWING_MARGIN:50,REFERENCE_WIDTH:1200,REFERENCE_HEIGHT:1500},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A,B,C"})}).catch(()=>{});let rt=document.createElement("canvas"),l=rt.getContext("2d"),tt=2;rt.width=n*tt,rt.height=s*tt,l.setTransform(tt,0,0,tt,0,0),l.fillStyle=o,l.fillRect(0,0,n,s);let C=n/1200,I=s/1500,et=1200-c*2-50*2,B=1500-c*2-50*2;fetch("http://127.0.0.1:7242/ingest/74d4f25e-0fce-432d-aa79-8bfa524124c4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"fold-core.js:2420",message:"inner dimensions calculated",data:{refInnerWidth:et,refInnerHeight:B,scaleX:C,scaleY:I},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A,B"})}).catch(()=>{});let F=jn(e,m,u,et,B),{cols:E,rows:K,strideX:z,strideY:Y,gridOffsetX:ft,gridOffsetY:be}=F,Ye=F.cellWidth,$e=F.cellHeight,Zt=et*C,kt=B*I,v=(c+50+ft)*C,_=(c+50+be)*I,yt=Ye*C,Wt=$e*I,Mt=z*C,vt=Y*I;fetch("http://127.0.0.1:7242/ingest/74d4f25e-0fce-432d-aa79-8bfa524124c4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"fold-core.js:2434",message:"drawing dimensions calculated",data:{drawWidth:Zt,drawHeight:kt,offsetX:v,offsetY:_,cols:E,rows:K,gridOffsetX:ft,gridOffsetY:be},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C,D,E"})}).catch(()=>{});let Ue=xe(e),Ke=Bn(p,E,K),ze=F.actualGridWidth,Ve=F.actualGridHeight,{creases:Ae,finalShape:Je,maxFolds:qe,firstFoldTarget:bt,lastFoldTarget:At}=je(ze,Ve,t,e,Ue,A,Ke),Qe=Ae.map(h=>({...h,p1:{x:h.p1.x*C,y:h.p1.y*I},p2:{x:h.p2.x*C,y:h.p2.y*I}})),te=null;if(bt){let h=Math.max(0,Math.min(E-1,Math.floor(bt.x/z))),x=Math.max(0,Math.min(K-1,Math.floor(bt.y/Y)));te=`${h},${x}`}let ee=null;if(At){let h=Math.max(0,Math.min(E-1,Math.floor(At.x/z))),x=Math.max(0,Math.min(K-1,Math.floor(At.y/Y)));ee=`${h},${x}`}let{activeCreases:Gt,intersections:wt,cellWeights:ne,cellMaxGap:oe}=Zn(Qe,E,K,Mt,vt,qe,p),pt=new Set;if(Object.keys(oe).length>0){let h=Math.max(...Object.values(oe));for(let[x,b]of Object.entries(oe))b===h&&pt.add(x)}let Ze=1+ue+de,st=Wt/Ze,so=st>350?"large":st>100?"medium":"small";l.font=`${st}px ${N}`,l.textBaseline="top";let nt=[" ","\u2591","\u2592","\u2593"],St=st<30?2:3,H=st*ke,tn=st*ue,we=st*de,Ce=st*Mn,Ee=st*bn,lo={" ":{width:H},"\u2591":{width:H,leftOffset:Ee,bottomOverflow:Ce},"\u2592":{width:H,bottomOverflow:Ce},"\u2593":{width:H,bottomOverflow:we}},Ct=Xn(ne),Ht=T(e+22222)(),Et;Ht<.6?Et=0:Ht<.8?Et=1:Ht<.9?Et=2:Ht<.97?Et=3:Et=5;let Pt=T(e+33333),Rt=Pt(),j;Rt<.22?j="ltr":Rt<.44?j="rtl":Rt<.65?j="center":Rt<.8?j="alternate":Rt<.9?j="diagonal":Rt<.96?j="randomMid":j="checkerboard";let en=Pt()<.5,nn=Math.floor(Pt()*E),on=Pt()<.5,Bt=T(e+11111),re=Bt()>=.5,rn=(()=>{if(!re)return 1;let h=Bt();return h<.2?.95:h<.4?.75:h<.6?.5:h<.8?.25:.05})(),sn=re?Math.floor(Bt()*5):0,It=[.95,.75,.5,.25,.05],Re=It.indexOf(rn),jt=Math.floor(Bt()*3)+1,ln=(h,x)=>{if(!re)return 1;let b=Re===-1?0:Re;switch(sn){case 1:b=(b+Math.floor(h/2)*jt)%It.length;break;case 2:b=(b+Math.floor(x/2)*jt)%It.length;break;case 3:b=(b+(h+x)%2*jt)%It.length;break;case 4:b=(b+Math.floor((h+x)/2)*jt)%It.length;break;default:break}return It[b]},ht=(h,x)=>f&&g?g[Math.min(h,3)]:r,Xt=T(e+22222),se=Xt()<.1,an=Math.round(2+Xt()*2)*C,cn=Math.round(1+Xt()*2)*I,fn=se?.4+Xt()*.3:0,hn=(h,x)=>{let b=T(e+22222+h*1e3+x),V=Math.floor(b()*3);return{x:V!==1?an:0,y:V!==0?cn:0}},un=se?(()=>{let h=Nt(r),x;return i&&i!==r?x=Nt(i):x={h:(h.h+180)%360,s:Math.min(100,h.s+20),l:h.l},x.l<=h.l&&(x.l=Math.min(95,h.l+25)),zt(x.h,x.s,x.l)})():null,Ie=(c+50)*C,le=(c+50)*I,Te=Ie+Ee,dn=le+tn,ae=Ie+Zt,fo=le+kt-we;if(ct){let h=L=>{let R=parseInt(L.slice(1,3),16),G=parseInt(L.slice(3,5),16),$=parseInt(L.slice(5,7),16);return An(R,G,$)},x=h(o),b=h(r),V=h(i),P=Math.abs(x-b)>Math.abs(x-V)?r:i;if(Gt.length>0){l.strokeStyle=P,l.lineWidth=2*C,l.globalAlpha=.9,l.lineCap="round";for(let L of Gt)l.beginPath(),l.moveTo(v+L.p1.x,_+L.p1.y),l.lineTo(v+L.p2.x,_+L.p2.y),l.stroke()}if(wt&&wt.length>0){l.strokeStyle=P,l.lineWidth=1.5*C,l.globalAlpha=1;let L=4*C;for(let R of wt)l.beginPath(),l.arc(v+R.x,_+R.y,L,0,Math.PI*2),l.stroke()}l.globalAlpha=1}else if(it){let h=Math.floor(Math.min(yt*.45,Wt*.7));l.font=`bold ${h}px monospace`,l.textAlign="center",l.textBaseline="middle",l.fillStyle=r;for(let x=0;x<K;x++)for(let b=0;b<E;b++){let V=Math.round(v+b*Mt+yt/2),P=Math.round(_+x*vt+Wt/2),L=`${b},${x}`,R=ne[L]||0;R>0&&l.fillText(Math.round(R).toString(),V,P)}l.textAlign="left",l.textBaseline="top"}else{let h=Math.max(v,Te),x=Math.max(_,dn);for(let b=0;b<K;b++){let V=Math.round(x+b*vt);if(!(V>le+kt))for(let P=0;P<E;P++){let L=Math.round(h+P*Mt),R=`${P},${b}`,G=ne[R]||0,$=null,k=r,O=-1,Yt=!1;if(te===R)O=G>0?Ot(G,Ct):2,$=nt[Math.min(Math.max(O,2),St)],k=i;else if(a==="normal")if(O=Ot(G,Ct),$=nt[Math.min(O,St)],O===0&&($=nt[1],Yt=!0),k=ht(O,R),G>=1.5){let Tt=G-1.5,ut=30+Math.min(Tt*300,150),U=Nt(r);k=zt((U.h+ut+360)%360,Math.min(100,U.s+20),Math.min(85,U.l+10))}else pt.has(R)&&G>0?k=i:ee===R&&(k=r);else if(a==="binary")G===0?($=nt[0],O=0,k=ht(0,R)):(O=St,$=nt[O],k=ht(O,R),pt.has(R)&&(k=i));else if(a==="inverted")if(O=Math.min(3-Ot(G,Ct),St),$=nt[O],k=ht(O,R),G>=1.5){let Tt=G-1.5,ut=30+Math.min(Tt*300,150),U=Nt(r);k=zt((U.h+ut+360)%360,Math.min(100,U.s+20),Math.min(85,U.l+10))}else pt.has(R)&&G>0&&(k=i);else if(a==="sparse")O=Ot(G,Ct),O===1&&($=nt[1],k=ht(1,R),pt.has(R)&&(k=i));else if(a==="dense")if(O=Ot(G,Ct),O>=2)if($=nt[Math.min(O,St)],k=ht(O,R),G>=1.5){let Tt=G-1.5,ut=30+Math.min(Tt*300,150),U=Nt(r);k=zt((U.h+ut+360)%360,Math.min(100,U.s+20),Math.min(85,U.l+10))}else pt.has(R)&&(k=i);else G===0&&($=nt[0],O=0,k=ht(0,R));if($){if(te===R||ee===R)l.fillStyle=k;else{let S=ht(Ot(G,Ct),R);l.fillStyle=pt.has(R)&&G>0?i:S}Yt&&(l.globalAlpha=.1,l.fillStyle=r);let Tt=l.measureText($).width,ut=L+yt;P===E-1&&fetch("http://127.0.0.1:7242/ingest/74d4f25e-0fce-432d-aa79-8bfa524124c4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"fold-core.js:2923",message:"last column cell boundary",data:{col:P,row:b,x:L,actualCellWidth:yt,cellEndX:ut,drawAreaRight:ae,outputWidth:n,offsetX:v,actualStrideX:Mt},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"F"})}).catch(()=>{});let U=Math.min(ut,ae),_t=U-L;if(_t<H*.5)continue;let gn=ln(b,P),Fe=H*gn,ie=Math.max(1,Math.floor((_t-H)/Fe)+1),mn=(ie-1)*Fe+H,lt=(_t-mn)/H>.3?ie+1:ie,gt=lt<=1?H:(_t-H)/(lt-1),Oe=Et*yt,ve=0;Oe>0&&(ve=Math.ceil(Oe/gt));let xn=lt+ve,ot;if(j==="ltr")ot="ltr";else if(j==="rtl")ot="rtl";else if(j==="center")ot="center";else if(j==="alternate")ot=b%2===1!==en?"rtl":"ltr";else if(j==="diagonal"){let S=(nn+(on?b:-b)+E*100)%E;ot=P<S?"ltr":"rtl"}else if(j==="randomMid"){let S=T(e+55555+b),Lt=Math.floor(S()*E);ot=P<Lt?"ltr":"rtl"}else j==="checkerboard"?ot=(b+P)%2===0?"ltr":"rtl":ot="ltr";let $t=L+_t/2;for(let S=0;S<xn&&O>=0;S++){let Lt=$;O>=2&&S>0&&S%2===0&&(Lt=nt[Math.max(0,O-1)]);let Z;if(ot==="center")if(S<lt){let J=Math.floor((S+1)/2)*gt;S%2===0?Z=$t+(S===0?-H/2:J-H/2):Z=$t-J-H/2}else{let J=S-lt,Ut=Math.floor(lt/2)*gt,Kt=Math.floor((J+1)/2)*gt;J%2===0?Z=$t+Ut+Kt:Z=$t-Ut-Kt-H}else if(S<lt)Z=L+S*gt;else if(ot==="rtl"){let J=S-lt;Z=L-(J+1)*gt}else{let J=S-lt;Z=U+J*gt}if(Z<Math.floor(Te)||Z+H>ae)break;if(se&&!Yt){let J=hn(b,P),Ut=l.globalAlpha,Kt=l.fillStyle;l.globalAlpha=fn,l.fillStyle=un,l.fillText(Lt,Z+J.x,V+J.y),l.globalAlpha=Ut,l.fillStyle=Kt}l.fillText(Lt,Z,V)}Yt&&(l.globalAlpha=1)}}}}if(q){l.strokeStyle=i,l.lineWidth=.5,l.globalAlpha=1;for(let h=0;h<K;h++)for(let x=0;x<E;x++){let b=Math.round(v+x*Mt),V=Math.round(_+h*vt);l.strokeRect(b,V,yt,Wt)}}if(Q&&Gt.length>0){let x=T(e+9292)()<.6;l.strokeStyle=x?i:r,l.lineWidth=1.5*C,l.globalAlpha=.85,l.lineCap="round";for(let b of Gt)l.beginPath(),l.moveTo(v+b.p1.x,_+b.p1.y),l.lineTo(v+b.p2.x,_+b.p2.y),l.stroke();l.globalAlpha=1}if(M){l.strokeStyle="#ff00ff",l.lineWidth=1,l.globalAlpha=.7;for(let h of Gt)l.beginPath(),l.moveTo(v+h.p1.x,_+h.p1.y),l.lineTo(v+h.p2.x,_+h.p2.y),l.stroke();l.globalAlpha=1}if(y){let h=Je.map(x=>({x:x.x*C,y:x.y*I}));if(h.length>=3){l.strokeStyle="#00ffff",l.lineWidth=2,l.globalAlpha=.9,l.beginPath(),l.moveTo(v+h[0].x,_+h[0].y);for(let x=1;x<h.length;x++)l.lineTo(v+h[x].x,_+h[x].y);l.closePath(),l.stroke(),l.fillStyle="#00ffff",l.globalAlpha=.15,l.fill(),l.globalAlpha=1}}if(D){l.strokeStyle=r,l.lineWidth=1,l.globalAlpha=.3;for(let h=0;h<=E;h++){let x=v+h*Mt;l.beginPath(),l.moveTo(x,_),l.lineTo(x,_+kt),l.stroke()}for(let h=0;h<=K;h++){let x=_+h*vt;l.beginPath(),l.moveTo(v,x),l.lineTo(v+Zt,x),l.stroke()}l.globalAlpha=1}if(d){let h=8*C;if(l.lineWidth=2,l.globalAlpha=1,bt){let x=v+bt.x*C,b=_+bt.y*I;l.strokeStyle="#00ff00",l.beginPath(),l.arc(x,b,h,0,Math.PI*2),l.stroke()}if(At){let x=v+At.x*C,b=_+At.y*I;l.strokeStyle="#00ff00",l.beginPath(),l.arc(x,b,h,0,Math.PI*2),l.stroke()}}if(w&&wt&&wt.length>0){l.strokeStyle="#ff0000",l.fillStyle="rgba(255, 0, 0, 0)",l.lineWidth=1.5,l.globalAlpha=1;let h=3;for(let x of wt)l.beginPath(),l.arc(v+x.x,_+x.y,h,0,Math.PI*2),l.fill(),l.stroke()}let pn={grid:{cols:E,rows:K,colGap:F.colGap,rowGap:F.rowGap},drawDirection:j,foldStrategy:A?.type||"random",multiColor:f,showCreaseLines:Q,creaseCount:Ae.length};return{dataUrl:rt.toDataURL("image/png"),settings:pn}}function Me(t,e=1200,n=1500,s=0,o=null){let r=Sn(t),i=_n(e,n,s,t),m=Ln(t),u=xe(t),a=He(t),f=kn(t),g=f?Nn(t,r.bg,r.text):null,A=We(t),p=Hn(t),c=Wn(t),M=Dn(t),y=o;if(y===null){let d=T(t+9999);y=Math.floor(1+d()*500)}return{seed:t,palette:r,cells:i,renderMode:m,weightRange:u,foldStrategy:a,multiColor:f,levelColors:g,maxFolds:A,paperProperties:p,showCreaseLines:c,overlapInfo:M,folds:y}}function to(t,e,n,s=""){let o=Me(e,1200,1500,0,n),r=xe(e),i=1200-50*2,m=1500-50*2,{creases:u}=je(i,m,n,e,r,o.foldStrategy,o.paperProperties),a=Pn(o.paperProperties);return{name:`Fold #${t}`,description:"On-chain generative paper folding art",image:s?`${s}/${t}`:"",attributes:[{trait_type:"Fold Strategy",value:o.foldStrategy.type},{trait_type:"Render Mode",value:o.renderMode},{trait_type:"Multi-Color",value:o.multiColor?"Yes":"No"},{trait_type:"Cell Size",value:`${o.cells.cellW}x${o.cells.cellH}`},{trait_type:"Fold Count",value:n},{trait_type:"Max Folds",value:o.maxFolds},{trait_type:"Crease Count",value:u.length},{trait_type:"Palette Strategy",value:o.palette.strategy},{trait_type:"Paper Type",value:a},{trait_type:"Paper Grain",value:o.paperProperties.angleAffinity!==null?"Grain":"Uniform"},...o.showCreaseLines?[{trait_type:"Crease Lines",value:"Visible"}]:[]]}}async function eo(t){if(!t)return!1;let e=document.createElement("style");e.textContent=`
    @font-face {
      font-family: '${Qt}';
      src: url('${t}');
    }
  `,document.head.appendChild(e);try{return await document.fonts.load(`12px ${Qt}`),!0}catch(n){return console.warn("Failed to load on-chain font:",n),!1}}function no(t){if(typeof t=="number")return t;if(typeof t!="string")return 0;let e=t.replace(/^0x/,"").slice(0,16),n=BigInt("0x"+e);return Number(n%BigInt(2147483647))}function oo(){let t=window.devicePixelRatio||1,e=window.innerWidth,n=window.innerHeight,s=4/5,o,r;e/n>s?(r=n,o=Math.floor(r*s)):(o=e,r=Math.floor(o/s));let i=Math.floor(o*t),m=Math.floor(r*t);return{width:o,height:r,renderWidth:i,renderHeight:m,dpr:t}}var mt=null;function Le(t,e){if(t===0)return"none";let n=t/e;return n<0?`${Math.round(n*100)}% overlap`:`${Math.round(n*100)}% gap`}var ge=!1,dt=!1,Vt=0,he=null,Jt=null;function qt(t,e,n,s,o){let r=oo(),i=n!==void 0?n:e.foldCount,m=o?s:s||ge,{dataUrl:u,settings:a}=Xe({folds:i,seed:e.seed,outputWidth:r.renderWidth,outputHeight:r.renderHeight,bgColor:e.params.palette.bg,textColor:e.params.palette.text,accentColor:e.params.palette.accent,cellWidth:e.params.cells.cellW,cellHeight:e.params.cells.cellH,renderMode:e.params.renderMode,multiColor:e.params.multiColor,levelColors:e.params.levelColors,foldStrategy:e.params.foldStrategy,paperProperties:e.params.paperProperties,showCreaseLines:e.params.showCreaseLines,showCreases:m,showIntersections:m,linesOnlyMode:s||!1}),f=document.getElementById("info");if(f){let A=Le(a.grid.colGap,e.params.cells.cellW),p=Le(a.grid.rowGap,e.params.cells.cellH),c=[`${a.grid.cols}\xD7${a.grid.rows}`,`dir:${a.drawDirection}`,`strategy:${a.foldStrategy}`];A!=="none"&&c.push(`col:${A}`),p!=="none"&&c.push(`row:${p}`),a.multiColor&&c.push("multiColor"),a.showCreaseLines&&c.push("creaseLines"),f.textContent=c.join(" | ")}let g=new Image;g.onload=()=>{let A=t.getContext("2d");t.width=r.renderWidth*2,t.height=r.renderHeight*2,t.style.width=r.width+"px",t.style.height=r.height+"px",A.drawImage(g,0,0,t.width,t.height),typeof window.scaleCanvas=="function"&&window.scaleCanvas()},g.src=u}function ro(t,e){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>t.apply(this,s),e)}}async function me(){let t=typeof window<"u"&&window.SEED,e=typeof window<"u"&&window.FOLD_COUNT,n=typeof window<"u"&&window.LESS_SEED;if(n&&!t&&(t=no(n)),t&&e===void 0){let o=T(t+9999);e=Math.floor(1+o()*500)}let s=typeof window<"u"&&window.FONT_DATA_URI||De;if(t&&e!==void 0){let i=function(){if(!dt||Vt>e){u();return}qt(o,mt,Vt,he==="lines-only",!0),Vt++,Jt=setTimeout(i,50)},m=function(a){dt=!0,Vt=0,he=a,i()},u=function(){dt=!1,he=null,Jt&&(clearTimeout(Jt),Jt=null)},o=document.getElementById("c")||document.querySelector("canvas");o||(o=document.createElement("canvas"),o.id="c",document.body.appendChild(o),document.body.style.cssText="margin:0;padding:0;background:#000;display:flex;align-items:center;justify-content:center;min-height:100vh;overflow:hidden;"),await eo(s);let r=Me(t,1200,1500,0,e);mt={seed:t,foldCount:e,params:r},qt(o,mt),window.addEventListener("resize",ro(()=>{mt&&!dt&&qt(o,mt)},150)),document.addEventListener("keydown",a=>{mt&&(a.shiftKey&&a.key==="F"&&(a.preventDefault(),ge=!ge,dt||qt(o,mt)),a.shiftKey&&a.key==="A"&&(a.preventDefault(),dt&&u(),m("full")),a.shiftKey&&a.key==="L"&&(a.preventDefault(),dt&&u(),m("lines-only")),a.key==="Escape"&&dt&&(a.preventDefault(),u()))})}}typeof window<"u"&&(window.SEED||window.FOLD_COUNT!==void 0||window.LESS_SEED)&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>me()):me());})();
